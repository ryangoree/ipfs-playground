"use strict";(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
var IpfsClient=(()=>{var Xy=Object.create;var un=Object.defineProperty;var Ky=Object.getOwnPropertyDescriptor;var Qy=Object.getOwnPropertyNames;var Yy=Object.getPrototypeOf,Zy=Object.prototype.hasOwnProperty;var Ea=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),K=(t,e)=>{for(var r in e)un(t,r,{get:e[r],enumerable:!0})},xa=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Qy(e))!Zy.call(t,o)&&o!==r&&un(t,o,{get:()=>e[o],enumerable:!(n=Ky(e,o))||n.enumerable});return t};var _=(t,e,r)=>(r=t!=null?Xy(Yy(t)):{},xa(e||!t||!t.__esModule?un(r,"default",{value:t,enumerable:!0}):r,t)),eg=t=>xa(un({},"__esModule",{value:!0}),t);var Cu=S((Yx,Tu)=>{Tu.exports=zs;var Su=128,Vb=127,Jb=~Vb,Gb=Math.pow(2,31);function zs(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw zs.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Gb;)e[r++]=t&255|Su,t/=128;for(;t&Jb;)e[r++]=t&255|Su,t>>>=7;return e[r]=t|0,zs.bytes=r-n+1,e}});var Pu=S((Zx,_u)=>{_u.exports=Hs;var Wb=128,Au=127;function Hs(t,n){var r=0,n=n||0,o=0,s=n,i,a=t.length;do{if(s>=a||o>49)throw Hs.bytes=0,new RangeError("Could not decode varint");i=t[s++],r+=o<28?(i&Au)<<o:(i&Au)*Math.pow(2,o),o+=7}while(i>=Wb);return Hs.bytes=s-n,r}});var ku=S((eS,Ou)=>{var Xb=Math.pow(2,7),Kb=Math.pow(2,14),Qb=Math.pow(2,21),Yb=Math.pow(2,28),Zb=Math.pow(2,35),e0=Math.pow(2,42),t0=Math.pow(2,49),r0=Math.pow(2,56),n0=Math.pow(2,63);Ou.exports=function(t){return t<Xb?1:t<Kb?2:t<Qb?3:t<Yb?4:t<Zb?5:t<e0?6:t<t0?7:t<r0?8:t<n0?9:10}});var Un=S((tS,Iu)=>{Iu.exports={encode:Cu(),decode:Pu(),encodingLength:ku()}});var oe=S((bS,$u)=>{"use strict";function Mu(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function v0(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Mu(t,r)}catch{r.message=t.message,r.stack=t.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),Mu(new o,r)}}$u.exports=v0});var Gu=S((AS,Ju)=>{function S0(){return typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}Ju.exports=S0});var Xu=S((_S,Wu)=>{"use strict";var T0=Gu(),Mn=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Ur=T0(),C0=Mn&&!Ur,A0=Ur&&!Mn,_0=Ur&&Mn,P0=typeof Ea=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!Ur,O0=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,k0=typeof process<"u"&&typeof process.env<"u"&&!1,I0=typeof navigator<"u"&&navigator.product==="ReactNative";Wu.exports={isTest:k0,isElectron:Ur,isElectronMain:A0,isElectronRenderer:_0,isNode:P0,isBrowser:C0,isWebWorker:O0,isEnvWithDom:Mn,isReactNative:I0}});var Yu=S((OS,Qu)=>{var Xt=1e3,Kt=Xt*60,Qt=Kt*60,Ct=Qt*24,R0=Ct*7,B0=Ct*365.25;Qu.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return U0(t);if(r==="number"&&isFinite(t))return e.long?L0(t):F0(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function U0(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*B0;case"weeks":case"week":case"w":return r*R0;case"days":case"day":case"d":return r*Ct;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Kt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Xt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function F0(t){var e=Math.abs(t);return e>=Ct?Math.round(t/Ct)+"d":e>=Qt?Math.round(t/Qt)+"h":e>=Kt?Math.round(t/Kt)+"m":e>=Xt?Math.round(t/Xt)+"s":t+"ms"}function L0(t){var e=Math.abs(t);return e>=Ct?qn(t,e,Ct,"day"):e>=Qt?qn(t,e,Qt,"hour"):e>=Kt?qn(t,e,Kt,"minute"):e>=Xt?qn(t,e,Xt,"second"):t+" ms"}function qn(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var ef=S((kS,Zu)=>{function j0(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=o,r.enabled=i,r.humanize=Yu(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let l=0;for(let y=0;y<f.length;y++)l=(l<<5)-l+f.charCodeAt(y),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(f){let l,y=null,w,h;function d(...b){if(!d.enabled)return;let D=d,A=Number(new Date),F=A-(l||A);D.diff=F,D.prev=l,D.curr=A,l=A,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let j=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(ce,ee)=>{if(ce==="%%")return"%";j++;let ae=r.formatters[ee];if(typeof ae=="function"){let Me=b[j];ce=ae.call(D,Me),b.splice(j,1),j--}return ce}),r.formatArgs.call(D,b),(D.log||r.log).apply(D,b)}return d.namespace=f,d.useColors=r.useColors(),d.color=r.selectColor(f),d.extend=n,d.destroy=r.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(w!==r.namespaces&&(w=r.namespaces,h=r.enabled(f)),h),set:b=>{y=b}}),typeof r.init=="function"&&r.init(d),d}function n(f,l){let y=r(this.namespace+(typeof l>"u"?":":l)+f);return y.log=this.log,y}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,y=(typeof f=="string"?f:"").split(/[\s,]+/),w=y.length;for(l=0;l<w;l++)!y[l]||(f=y[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function i(f){if(f[f.length-1]==="*")return!0;let l,y;for(l=0,y=r.skips.length;l<y;l++)if(r.skips[l].test(f))return!1;for(l=0,y=r.names.length;l<y;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Zu.exports=j0});var tf=S((ye,zn)=>{ye.formatArgs=$0;ye.save=q0;ye.load=z0;ye.useColors=M0;ye.storage=H0();ye.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ye.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function M0(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function $0(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+zn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}ye.log=console.debug||console.log||(()=>{});function q0(t){try{t?ye.storage.setItem("debug",t):ye.storage.removeItem("debug")}catch{}}function z0(){let t;try{t=ye.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function H0(){try{return localStorage}catch{}}zn.exports=ef()(ye);var{formatters:V0}=zn.exports;V0.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ri=S(Vn=>{"use strict";var Zs=class extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}};Vn.TimeoutError=Zs;var ei=class extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}};Vn.AbortError=ei;var ti=class extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}};Vn.HTTPError=ti});var Fr=S((Yt,rf)=>{"use strict";var J0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof nt<"u")return nt;throw new Error("unable to locate global object")},nt=J0();rf.exports=Yt=nt.fetch;nt.fetch&&(Yt.default=nt.fetch.bind(nt));Yt.Headers=nt.Headers;Yt.Request=nt.Request;Yt.Response=nt.Response});var nf=S((FS,ni)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?ni.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:ni.exports={default:Fr().default,Headers:Fr().Headers,Request:Fr().Request,Response:Fr().Response}});var sf=S((LS,of)=>{"use strict";of.exports=nf()});var uf=S((jS,cf)=>{"use strict";var{TimeoutError:G0,AbortError:W0}=ri(),{Response:af,Request:X0,Headers:si,default:K0}=sf(),Q0=(t,e={})=>{let r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);let{timeout:n,headers:o}=e;if(n&&n>0&&n<1/0&&(r.timeout=n),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),o)for(let[s,i]of new si(o))r.setRequestHeader(s,i);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((s,i)=>{let a=c=>{switch(c.type){case"error":{s(af.error());break}case"load":{s(new oi(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:ev(r.getAllResponseHeaders())}));break}case"timeout":{i(new G0);break}case"abort":{i(new W0);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(e.body)})},Y0=K0,Z0=(t,e={})=>e.onUploadProgress!=null?Q0(t,e):Y0(t,e),ev=t=>{let e=new si;for(let r of t.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e},oi=class extends af{constructor(e,r,n){super(r,n),Object.defineProperty(this,"url",{value:e})}};cf.exports={fetch:Z0,Request:X0,Headers:si}});var lf=S((MS,ff)=>{"use strict";ff.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var ai=S((mf,yf)=>{"use strict";var Jn=lf(),{hasOwnProperty:pf}=Object.prototype,{propertyIsEnumerable:tv}=Object,Zt=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),rv=mf,df={concatArrays:!1,ignoreUndefined:!1},Gn=t=>{let e=[];for(let r in t)pf.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let n of r)tv.call(t,n)&&e.push(n)}return e};function er(t){return Array.isArray(t)?nv(t):Jn(t)?ov(t):t}function nv(t){let e=t.slice(0,0);return Gn(t).forEach(r=>{Zt(e,r,er(t[r]))}),e}function ov(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return Gn(t).forEach(r=>{Zt(e,r,er(t[r]))}),e}var hf=(t,e,r,n)=>(r.forEach(o=>{typeof e[o]>"u"&&n.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?Zt(t,o,ii(t[o],e[o],n)):Zt(t,o,er(e[o])))}),t),sv=(t,e,r)=>{let n=t.slice(0,0),o=0;return[t,e].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)!pf.call(s,a)||(i.push(String(a)),s===t?Zt(n,o++,s[a]):Zt(n,o++,er(s[a])));n=hf(n,s,Gn(s).filter(a=>!i.includes(a)),r)}),n};function ii(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?sv(t,e,r):!Jn(e)||!Jn(t)?er(e):hf(t,e,Gn(e),r)}yf.exports=function(...t){let e=ii(er(df),this!==rv&&this||{},df),r={_:{}};for(let n of t)if(n!==void 0){if(!Jn(n))throw new TypeError("`"+n+"` is not an Option Object");r=ii(r,{_:n},e)}return r._}});var ui=S(($S,wf)=>{"use strict";var iv=typeof navigator<"u"&&navigator.product==="ReactNative";function av(){return iv?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var Lr=self.URL,gf=av(),ci=class{constructor(e="",r=gf){this.super=new Lr(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return Lr.createObjectURL(e)}static revokeObjectURL(e){Lr.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function cv(t){if(typeof t=="string")return new Lr(t).toString();if(!(t instanceof Lr)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",s=t.host||"",i=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"",f=t.path||u+a;return`${o}${e||r}${s||i+n}${f}${c}`}}wf.exports={URLWithLegacySupport:ci,URLSearchParams:self.URLSearchParams,defaultBase:gf,format:cv}});var Df=S((qS,vf)=>{"use strict";var{URLWithLegacySupport:bf,format:uv}=ui();vf.exports=(t,e={},r={},n)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let s;try{s=new bf(t)}catch{s={}}let i=Object.assign({},e,{protocol:o||s.protocol,host:e.host||s.host});return new bf(t,uv(i)).toString()}});var xf=S((zS,Ef)=>{"use strict";var{URLWithLegacySupport:fv,format:lv,URLSearchParams:dv,defaultBase:pv}=ui(),hv=Df();Ef.exports={URL:fv,URLSearchParams:dv,format:lv,relative:hv,defaultBase:pv}});var Wn=S((HS,fi)=>{function Sf(t){let e=new globalThis.AbortController;function r(){e.abort();for(let n of t)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(let n of t)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}fi.exports=Sf;fi.exports.anySignal=Sf});var Xn=S((VS,Of)=>{"use strict";var{fetch:mv,Request:yv,Headers:gv}=uf(),{TimeoutError:li,HTTPError:_f}=ri(),Tf=ai().bind({ignoreUndefined:!0}),{URL:Cf,URLSearchParams:Af}=xf(),wv=Wn(),bv=(t,e,r)=>{if(e===void 0)return t;let n=Date.now(),o=()=>Date.now()-n>=e;return new Promise((s,i)=>{let a=setTimeout(()=>{o()&&(i(new li),r.abort())},e),c=u=>l=>{if(clearTimeout(a),o()){i(new li);return}u(l)};t.then(c(s),c(i))})},vv={throwHttpErrors:!0,credentials:"same-origin"},se=class{constructor(e={}){this.opts=Tf(vv,e)}async fetch(e,r={}){let n=Tf(this.opts,r),o=new gv(n.headers);if(typeof e!="string"&&!(e instanceof Cf||e instanceof yv))throw new TypeError("`resource` must be a string, URL, or Request");let s=new Cf(e.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i&&(typeof a=="function"?s.search=a(new Af(n.searchParams)):s.search=new Af(n.searchParams)),c&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let u=new AbortController,f=wv([u.signal,n.signal]),l=await bv(mv(s.toString(),{...n,signal:f,timeout:void 0,headers:o}),n.timeout,u);if(!l.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(l),new _f(l);return l.iterator=async function*(){yield*Pf(l.body)},l.ndjson=async function*(){for await(let y of Dv(l.iterator()))r.transform?yield r.transform(y):yield y},l}post(e,r={}){return this.fetch(e,{...r,method:"POST"})}get(e,r={}){return this.fetch(e,{...r,method:"GET"})}put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}},Dv=async function*(t){let e=new TextDecoder,r="";for await(let n of t){r+=e.decode(n,{stream:!0});let o=r.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},Pf=t=>{if(Sv(t)){let e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(xv(t)){let e=t.getReader();return async function*(){try{for(;;){let{done:r,value:n}=await e.read();if(r)return;n&&(yield n)}}finally{e.releaseLock()}}()}if(Ev(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},Ev=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",xv=t=>t&&typeof t.getReader=="function",Sv=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");se.HTTPError=_f;se.TimeoutError=li;se.streamToAsyncIterator=Pf;se.post=(t,e)=>new se(e).post(t,e);se.get=(t,e)=>new se(e).get(t,e);se.put=(t,e)=>new se(e).put(t,e);se.delete=(t,e)=>new se(e).delete(t,e);se.options=(t,e)=>new se(e).options(t,e);Of.exports=se});var zr=S((G2,Jf)=>{"use strict";function jv(t){let[e,r]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:o=>{n.push(o)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}Jf.exports=jv});var tr=S((W2,Gf)=>{"use strict";async function*Mv(t,e={}){let r=t.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&r.cancel(),r.releaseLock()}}Gf.exports=Mv});var di=S((X2,Wf)=>{"use strict";var $v=async t=>{let e=[];for await(let r of t)e.push(r);return e};Wf.exports=$v});var pi=S((Z2,tl)=>{"use strict";var qv=async function*(t,e){for await(let r of t)yield e(r)};tl.exports=qv});var hi=S((e3,rl)=>{"use strict";rl.exports=zv;function zv(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,s=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(a,c){r[n]=function(f){if(s)if(s=!1,f)c(f);else{for(var l=new Array(arguments.length-1),y=0;y<l.length;)l[y++]=arguments[y];a.apply(null,l)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,c(u))}})}});var il=S(sl=>{"use strict";var ro=sl;ro.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var rr=new Array(64),ol=new Array(123);for(Ue=0;Ue<64;)ol[rr[Ue]=Ue<26?Ue+65:Ue<52?Ue+71:Ue<62?Ue-4:Ue-59|43]=Ue++;var Ue;ro.encode=function(e,r,n){for(var o=null,s=[],i=0,a=0,c;r<n;){var u=e[r++];switch(a){case 0:s[i++]=rr[u>>2],c=(u&3)<<4,a=1;break;case 1:s[i++]=rr[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[i++]=rr[c|u>>6],s[i++]=rr[u&63],a=0;break}i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0)}return a&&(s[i++]=rr[c],s[i++]=61,a===1&&(s[i++]=61)),o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))};var nl="invalid encoding";ro.decode=function(e,r,n){for(var o=n,s=0,i,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=ol[c])===void 0)throw Error(nl);switch(s){case 0:i=c,s=1;break;case 1:r[n++]=i<<2|(c&48)>>4,i=c,s=2;break;case 2:r[n++]=(i&15)<<4|(c&60)>>2,i=c,s=3;break;case 3:r[n++]=(i&3)<<6|c,s=0;break}}if(s===1)throw Error(nl);return n-o};ro.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var cl=S((r3,al)=>{"use strict";al.exports=no;function no(){this._listeners={}}no.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};no.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};no.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this}});var ml=S((n3,hl)=>{"use strict";hl.exports=ul(ul);function ul(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function o(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function s(c,u,f){e[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}t.writeFloatLE=n?o:s,t.writeFloatBE=n?s:o;function i(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=n?i:a,t.readFloatBE=n?a:i}():function(){function e(n,o,s,i){var a=o<0?1:0;if(a&&(o=-o),o===0)n(1/o>0?0:2147483648,s,i);else if(isNaN(o))n(2143289344,s,i);else if(o>34028234663852886e22)n((a<<31|2139095040)>>>0,s,i);else if(o<11754943508222875e-54)n((a<<31|Math.round(o/1401298464324817e-60))>>>0,s,i);else{var c=Math.floor(Math.log(o)/Math.LN2),u=Math.round(o*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,s,i)}}t.writeFloatLE=e.bind(null,fl),t.writeFloatBE=e.bind(null,ll);function r(n,o,s){var i=n(o,s),a=(i>>31)*2+1,c=i>>>23&255,u=i&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,dl),t.readFloatBE=r.bind(null,pl)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function o(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function s(c,u,f){e[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}t.writeDoubleLE=n?o:s,t.writeDoubleBE=n?s:o;function i(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=n?i:a,t.readDoubleBE=n?a:i}():function(){function e(n,o,s,i,a,c){var u=i<0?1:0;if(u&&(i=-i),i===0)n(0,a,c+o),n(1/i>0?0:2147483648,a,c+s);else if(isNaN(i))n(0,a,c+o),n(2146959360,a,c+s);else if(i>17976931348623157e292)n(0,a,c+o),n((u<<31|2146435072)>>>0,a,c+s);else{var f;if(i<22250738585072014e-324)f=i/5e-324,n(f>>>0,a,c+o),n((u<<31|f/4294967296)>>>0,a,c+s);else{var l=Math.floor(Math.log(i)/Math.LN2);l===1024&&(l=1023),f=i*Math.pow(2,-l),n(f*4503599627370496>>>0,a,c+o),n((u<<31|l+1023<<20|f*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,fl,0,4),t.writeDoubleBE=e.bind(null,ll,4,0);function r(n,o,s,i,a){var c=n(i,a+o),u=n(i,a+s),f=(u>>31)*2+1,l=u>>>20&2047,y=4294967296*(u&1048575)+c;return l===2047?y?NaN:f*(1/0):l===0?f*5e-324*y:f*Math.pow(2,l-1075)*(y+4503599627370496)}t.readDoubleLE=r.bind(null,dl,0,4),t.readDoubleBE=r.bind(null,pl,4,0)}(),t}function fl(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function ll(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function dl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function pl(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var mi=S((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var gl=S(yl=>{"use strict";var yi=yl;yi.length=function(e){for(var r=0,n=0,o=0;o<e.length;++o)n=e.charCodeAt(o),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(o+1)&64512)===56320?(++o,r+=4):r+=3;return r};yi.read=function(e,r,n){var o=n-r;if(o<1)return"";for(var s=null,i=[],a=0,c;r<n;)c=e[r++],c<128?i[a++]=c:c>191&&c<224?i[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(c>>10),i[a++]=56320+(c&1023)):i[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};yi.write=function(e,r,n){for(var o=n,s,i,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(i&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-o}});var bl=S((s3,wl)=>{"use strict";wl.exports=Hv;function Hv(t,e,r){var n=r||8192,o=n>>>1,s=null,i=n;return function(c){if(c<1||c>o)return t(c);i+c>n&&(s=t(n),i=0);var u=e.call(s,i,i+=c);return i&7&&(i=(i|7)+1),u}}});var Dl=S((i3,vl)=>{"use strict";vl.exports=Z;var Vr=Je();function Z(t,e){this.lo=t>>>0,this.hi=e>>>0}var Pt=Z.zero=new Z(0,0);Pt.toNumber=function(){return 0};Pt.zzEncode=Pt.zzDecode=function(){return this};Pt.length=function(){return 1};var Vv=Z.zeroHash="\0\0\0\0\0\0\0\0";Z.fromNumber=function(e){if(e===0)return Pt;var r=e<0;r&&(e=-e);var n=e>>>0,o=(e-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new Z(n,o)};Z.from=function(e){if(typeof e=="number")return Z.fromNumber(e);if(Vr.isString(e))if(Vr.Long)e=Vr.Long.fromString(e);else return Z.fromNumber(parseInt(e,10));return e.low||e.high?new Z(e.low>>>0,e.high>>>0):Pt};Z.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Z.prototype.toLong=function(e){return Vr.Long?new Vr.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var gt=String.prototype.charCodeAt;Z.fromHash=function(e){return e===Vv?Pt:new Z((gt.call(e,0)|gt.call(e,1)<<8|gt.call(e,2)<<16|gt.call(e,3)<<24)>>>0,(gt.call(e,4)|gt.call(e,5)<<8|gt.call(e,6)<<16|gt.call(e,7)<<24)>>>0)};Z.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Z.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Z.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Z.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Je=S(gi=>{"use strict";var C=gi;C.asPromise=hi();C.base64=il();C.EventEmitter=cl();C.float=ml();C.inquire=mi();C.utf8=gl();C.pool=bl();C.LongBits=Dl();C.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);C.global=C.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||gi;C.emptyArray=Object.freeze?Object.freeze([]):[];C.emptyObject=Object.freeze?Object.freeze({}):{};C.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};C.isString=function(e){return typeof e=="string"||e instanceof String};C.isObject=function(e){return e&&typeof e=="object"};C.isset=C.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};C.Buffer=function(){try{var t=C.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();C._Buffer_from=null;C._Buffer_allocUnsafe=null;C.newBuffer=function(e){return typeof e=="number"?C.Buffer?C._Buffer_allocUnsafe(e):new C.Array(e):C.Buffer?C._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};C.Array=typeof Uint8Array<"u"?Uint8Array:Array;C.Long=C.global.dcodeIO&&C.global.dcodeIO.Long||C.global.Long||C.inquire("long");C.key2Re=/^true|false|0|1$/;C.key32Re=/^-?(?:0|[1-9][0-9]*)$/;C.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;C.longToHash=function(e){return e?C.LongBits.from(e).toHash():C.LongBits.zeroHash};C.longFromHash=function(e,r){var n=C.LongBits.fromHash(e);return C.Long?C.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function El(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;++o)(t[n[o]]===void 0||!r)&&(t[n[o]]=e[n[o]]);return t}C.merge=El;C.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function xl(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&El(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}C.newError=xl;C.ProtocolError=xl("ProtocolError");C.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var o=Object.keys(this),s=o.length-1;s>-1;--s)if(r[o[s]]===1&&this[o[s]]!==void 0&&this[o[s]]!==null)return o[s]}};C.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};C.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};C._configure=function(){var t=C.Buffer;if(!t){C._Buffer_from=C._Buffer_allocUnsafe=null;return}C._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},C._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var so=S((c3,Al)=>{"use strict";Al.exports=N;var xe=Je(),wi,oo=xe.LongBits,Sl=xe.base64,Tl=xe.utf8;function Jr(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function vi(){}function Jv(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function N(){this.len=0,this.head=new Jr(vi,0,0),this.tail=this.head,this.states=null}var Cl=function(){return xe.Buffer?function(){return(N.create=function(){return new wi})()}:function(){return new N}};N.create=Cl();N.alloc=function(e){return new xe.Array(e)};xe.Array!==Array&&(N.alloc=xe.pool(N.alloc,xe.Array.prototype.subarray));N.prototype._push=function(e,r,n){return this.tail=this.tail.next=new Jr(e,r,n),this.len+=r,this};function Di(t,e,r){e[r]=t&255}function Gv(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Ei(t,e){this.len=t,this.next=void 0,this.val=e}Ei.prototype=Object.create(Jr.prototype);Ei.prototype.fn=Gv;N.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Ei((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};N.prototype.int32=function(e){return e<0?this._push(xi,10,oo.fromNumber(e)):this.uint32(e)};N.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function xi(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}N.prototype.uint64=function(e){var r=oo.from(e);return this._push(xi,r.length(),r)};N.prototype.int64=N.prototype.uint64;N.prototype.sint64=function(e){var r=oo.from(e).zzEncode();return this._push(xi,r.length(),r)};N.prototype.bool=function(e){return this._push(Di,1,e?1:0)};function bi(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}N.prototype.fixed32=function(e){return this._push(bi,4,e>>>0)};N.prototype.sfixed32=N.prototype.fixed32;N.prototype.fixed64=function(e){var r=oo.from(e);return this._push(bi,4,r.lo)._push(bi,4,r.hi)};N.prototype.sfixed64=N.prototype.fixed64;N.prototype.float=function(e){return this._push(xe.float.writeFloatLE,4,e)};N.prototype.double=function(e){return this._push(xe.float.writeDoubleLE,8,e)};var Wv=xe.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var o=0;o<e.length;++o)r[n+o]=e[o]};N.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Di,1,0);if(xe.isString(e)){var n=N.alloc(r=Sl.length(e));Sl.decode(e,n,0),e=n}return this.uint32(r)._push(Wv,r,e)};N.prototype.string=function(e){var r=Tl.length(e);return r?this.uint32(r)._push(Tl.write,r,e):this._push(Di,1,0)};N.prototype.fork=function(){return this.states=new Jv(this),this.head=this.tail=new Jr(vi,0,0),this.len=0,this};N.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Jr(vi,0,0),this.len=0),this};N.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};N.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};N._configure=function(t){wi=t,N.create=Cl(),wi._configure()}});var Ol=S((u3,Pl)=>{"use strict";Pl.exports=Ge;var _l=so();(Ge.prototype=Object.create(_l.prototype)).constructor=Ge;var wt=Je();function Ge(){_l.call(this)}Ge._configure=function(){Ge.alloc=wt._Buffer_allocUnsafe,Ge.writeBytesBuffer=wt.Buffer&&wt.Buffer.prototype instanceof Uint8Array&&wt.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var o=0;o<e.length;)r[n++]=e[o++]}};Ge.prototype.bytes=function(e){wt.isString(e)&&(e=wt._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Ge.writeBytesBuffer,r,e),this};function Xv(t,e,r){t.length<40?wt.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Ge.prototype.string=function(e){var r=wt.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Xv,r,e),this};Ge._configure()});var ao=S((f3,Bl)=>{"use strict";Bl.exports=z;var We=Je(),Ti,Nl=We.LongBits,Kv=We.utf8;function Fe(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function z(t){this.buf=t,this.pos=0,this.len=t.length}var kl=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new z(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new z(e);throw Error("illegal buffer")},Rl=function(){return We.Buffer?function(r){return(z.create=function(o){return We.Buffer.isBuffer(o)?new Ti(o):kl(o)})(r)}:kl};z.create=Rl();z.prototype._slice=We.Array.prototype.subarray||We.Array.prototype.slice;z.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Fe(this,10);return e}}();z.prototype.int32=function(){return this.uint32()|0};z.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Si(){var t=new Nl(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Fe(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Fe(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}z.prototype.bool=function(){return this.uint32()!==0};function io(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}z.prototype.fixed32=function(){if(this.pos+4>this.len)throw Fe(this,4);return io(this.buf,this.pos+=4)};z.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Fe(this,4);return io(this.buf,this.pos+=4)|0};function Il(){if(this.pos+8>this.len)throw Fe(this,8);return new Nl(io(this.buf,this.pos+=4),io(this.buf,this.pos+=4))}z.prototype.float=function(){if(this.pos+4>this.len)throw Fe(this,4);var e=We.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};z.prototype.double=function(){if(this.pos+8>this.len)throw Fe(this,4);var e=We.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};z.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Fe(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};z.prototype.string=function(){var e=this.bytes();return Kv.read(e,0,e.length)};z.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Fe(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Fe(this);while(this.buf[this.pos++]&128);return this};z.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};z._configure=function(t){Ti=t,z.create=Rl(),Ti._configure();var e=We.Long?"toLong":"toNumber";We.merge(z.prototype,{int64:function(){return Si.call(this)[e](!1)},uint64:function(){return Si.call(this)[e](!0)},sint64:function(){return Si.call(this).zzDecode()[e](!1)},fixed64:function(){return Il.call(this)[e](!0)},sfixed64:function(){return Il.call(this)[e](!1)}})}});var jl=S((l3,Ll)=>{"use strict";Ll.exports=Ot;var Fl=ao();(Ot.prototype=Object.create(Fl.prototype)).constructor=Ot;var Ul=Je();function Ot(t){Fl.call(this,t)}Ot._configure=function(){Ul.Buffer&&(Ot.prototype._slice=Ul.Buffer.prototype.slice)};Ot.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Ot._configure()});var $l=S((d3,Ml)=>{"use strict";Ml.exports=Gr;var Ci=Je();(Gr.prototype=Object.create(Ci.EventEmitter.prototype)).constructor=Gr;function Gr(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Ci.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Gr.prototype.rpcCall=function t(e,r,n,o,s){if(!o)throw TypeError("request must be specified");var i=this;if(!s)return Ci.asPromise(t,i,e,r,n,o);if(!i.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return i.rpcImpl(e,r[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(c,u){if(c)return i.emit("error",c,e),s(c);if(u===null){i.end(!0);return}if(!(u instanceof n))try{u=n[i.responseDelimited?"decodeDelimited":"decode"](u)}catch(f){return i.emit("error",f,e),s(f)}return i.emit("data",u,e),s(null,u)})}catch(a){i.emit("error",a,e),setTimeout(function(){s(a)},0);return}};Gr.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Ai=S(ql=>{"use strict";var Qv=ql;Qv.Service=$l()});var _i=S((h3,zl)=>{"use strict";zl.exports={}});var Pi=S(Vl=>{"use strict";var ue=Vl;ue.build="minimal";ue.Writer=so();ue.BufferWriter=Ol();ue.Reader=ao();ue.BufferReader=jl();ue.util=Je();ue.rpc=Ai();ue.roots=_i();ue.configure=Hl;function Hl(){ue.util._configure(),ue.Writer._configure(ue.BufferWriter),ue.Reader._configure(ue.BufferReader)}Hl()});var Gl=S((y3,Jl)=>{"use strict";Jl.exports=Pi()});var uo=S((aT,bd)=>{"use strict";var n1=async t=>{for await(let e of t)return e};bd.exports=n1});var Xr=S((cT,vd)=>{"use strict";var o1=async t=>{let e;for await(let r of t)e=r;return e};vd.exports=o1});var Gd=S((sA,Jd)=>{Jd.exports=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}();throw new Error("unknown stream")}});var Sh=S((rk,xh)=>{"use strict";var Eh=tr();function D1(t){return typeof t.stream=="function"?Eh(t.stream()):Eh(new Response(t).body)}xh.exports=D1});var Yh=S((fI,Qh)=>{"use strict";var x1=Xn(),S1=(t,e)=>({path:decodeURIComponent(new URL(t).pathname.split("/").pop()||""),content:T1(t,e)});async function*T1(t,e){yield*(await new x1().get(t,e)).iterator()}Qh.exports=S1});var rm=S((e5,tm)=>{"use strict";tm.exports=Ui;function Ui(t,e){typeof t=="string"&&(e=t,t=void 0);var r=[];function n(s){if(typeof s!="string"){var i=o();if(Ui.verbose&&console.log("codegen: "+i),i="return "+i,s){for(var a=Object.keys(s),c=new Array(a.length+1),u=new Array(a.length),f=0;f<a.length;)c[f]=a[f],u[f]=s[a[f++]];return c[f]=i,Function.apply(null,c).apply(null,u)}return Function(i)()}for(var l=new Array(arguments.length-1),y=0;y<l.length;)l[y]=arguments[++y];if(y=0,s=s.replace(/%([%dfijs])/g,function(h,d){var b=l[y++];switch(d){case"d":case"f":return String(Number(b));case"i":return String(Math.floor(b));case"j":return JSON.stringify(b);case"s":return String(b)}return"%"}),y!==l.length)throw Error("parameter count mismatch");return r.push(s),n}function o(s){return"function "+(s||e||"")+"("+(t&&t.join(",")||"")+`){
  `+r.join(`
  `)+`
}`}return n.toString=o,n}Ui.verbose=!1});var om=S((t5,nm)=>{"use strict";nm.exports=Qr;var A1=hi(),_1=mi(),Fi=_1("fs");function Qr(t,e,r){return typeof e=="function"?(r=e,e={}):e||(e={}),r?!e.xhr&&Fi&&Fi.readFile?Fi.readFile(t,function(o,s){return o&&typeof XMLHttpRequest<"u"?Qr.xhr(t,e,r):o?r(o):r(null,e.binary?s:s.toString("utf8"))}):Qr.xhr(t,e,r):A1(Qr,this,t,e)}Qr.xhr=function(e,r,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===4){if(o.status!==0&&o.status!==200)return n(Error("status "+o.status));if(r.binary){var i=o.response;if(!i){i=[];for(var a=0;a<o.responseText.length;++a)i.push(o.responseText.charCodeAt(a)&255)}return n(null,typeof Uint8Array<"u"?new Uint8Array(i):i)}return n(null,o.responseText)}},r.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}});var am=S(im=>{"use strict";var ji=im,sm=ji.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},Li=ji.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var r=e.split("/"),n=sm(e),o="";n&&(o=r.shift()+"/");for(var s=0;s<r.length;)r[s]===".."?s>0&&r[s-1]!==".."?r.splice(--s,2):n?r.splice(s,1):++s:r[s]==="."?r.splice(s,1):++s;return o+r.join("/")};ji.resolve=function(e,r,n){return n||(r=Li(r)),sm(r)?r:(n||(e=Li(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Li(e+"/"+r):r)}});var lr=S(cm=>{"use strict";var Yr=cm,P1=ne(),O1=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Zr(t,e){var r=0,n={};for(e|=0;r<t.length;)n[O1[r+e]]=t[r++];return n}Yr.basic=Zr([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Yr.defaults=Zr([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",P1.emptyArray,null]);Yr.long=Zr([0,0,0,1,1],7);Yr.mapKey=Zr([0,0,0,5,5,0,0,0,1,1,0,2],2);Yr.packed=Zr([1,5,0,0,0,5,5,0,0,0,1,1,0])});var kt=S((o5,lm)=>{"use strict";lm.exports=Te;var To=It();((Te.prototype=Object.create(To.prototype)).constructor=Te).className="Field";var um=Xe(),fm=lr(),X=ne(),Mi,k1=/^required|optional|repeated$/;Te.fromJSON=function(e,r){return new Te(e,r.id,r.type,r.rule,r.extend,r.options,r.comment)};function Te(t,e,r,n,o,s,i){if(X.isObject(n)?(i=o,s=n,n=o=void 0):X.isObject(o)&&(i=s,s=o,o=void 0),To.call(this,t,s),!X.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!X.isString(r))throw TypeError("type must be a string");if(n!==void 0&&!k1.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(o!==void 0&&!X.isString(o))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=r,this.id=e,this.extend=o||void 0,this.required=n==="required",this.optional=!this.required,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=X.Long?fm.long[r]!==void 0:!1,this.bytes=r==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=i}Object.defineProperty(Te.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Te.prototype.setOption=function(e,r,n){return e==="packed"&&(this._packed=null),To.prototype.setOption.call(this,e,r,n)};Te.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return X.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};Te.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=fm.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Mi?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof um&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof um))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=X.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;X.base64.test(this.typeDefault)?X.base64.decode(this.typeDefault,e=X.newBuffer(X.base64.length(this.typeDefault)),0):X.utf8.write(this.typeDefault,e=X.newBuffer(X.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=X.emptyObject:this.repeated?this.defaultValue=X.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Mi&&(this.parent.ctor.prototype[this.name]=this.defaultValue),To.prototype.resolve.call(this)};Te.d=function(e,r,n,o){return typeof r=="function"?r=X.decorateType(r).name:r&&typeof r=="object"&&(r=X.decorateEnum(r).name),function(i,a){X.decorateType(i.constructor).add(new Te(a,e,r,n,{default:o}))}};Te._configure=function(e){Mi=e}});var en=S((s5,hm)=>{"use strict";hm.exports=Ce;var Ao=It();((Ce.prototype=Object.create(Ao.prototype)).constructor=Ce).className="OneOf";var dm=kt(),Co=ne();function Ce(t,e,r,n){if(Array.isArray(e)||(r=e,e=void 0),Ao.call(this,t,r),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}Ce.fromJSON=function(e,r){return new Ce(e,r.oneof,r.options,r.comment)};Ce.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Co.toObject(["options",this.options,"oneof",this.oneof,"comment",r?this.comment:void 0])};function pm(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}Ce.prototype.add=function(e){if(!(e instanceof dm))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,pm(this),this};Ce.prototype.remove=function(e){if(!(e instanceof dm))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(e);if(r<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(r,1),r=this.oneof.indexOf(e.name),r>-1&&this.oneof.splice(r,1),e.partOf=null,this};Ce.prototype.onAdd=function(e){Ao.prototype.onAdd.call(this,e);for(var r=this,n=0;n<this.oneof.length;++n){var o=e.get(this.oneof[n]);o&&!o.partOf&&(o.partOf=r,r.fieldsArray.push(o))}pm(this)};Ce.prototype.onRemove=function(e){for(var r=0,n;r<this.fieldsArray.length;++r)(n=this.fieldsArray[r]).parent&&n.parent.remove(n);Ao.prototype.onRemove.call(this,e)};Ce.d=function(){for(var e=new Array(arguments.length),r=0;r<arguments.length;)e[r]=arguments[r++];return function(o,s){Co.decorateType(o.constructor).add(new Ce(s,e)),Object.defineProperty(o,s,{get:Co.oneOfGetter(e),set:Co.oneOfSetter(e)})}}});var hr=S((i5,wm)=>{"use strict";wm.exports=B;var $i=It();((B.prototype=Object.create($i.prototype)).constructor=B).className="Namespace";var mm=kt(),_o=ne(),I1=en(),dr,tn,pr;B.fromJSON=function(e,r){return new B(e,r.options).addJSON(r.nested)};function ym(t,e){if(!!(t&&t.length)){for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON(e);return r}}B.arrayToJSON=ym;B.isReservedId=function(e,r){if(e){for(var n=0;n<e.length;++n)if(typeof e[n]!="string"&&e[n][0]<=r&&e[n][1]>r)return!0}return!1};B.isReservedName=function(e,r){if(e){for(var n=0;n<e.length;++n)if(e[n]===r)return!0}return!1};function B(t,e){$i.call(this,t,e),this.nested=void 0,this._nestedArray=null}function gm(t){return t._nestedArray=null,t}Object.defineProperty(B.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=_o.toArray(this.nested))}});B.prototype.toJSON=function(e){return _o.toObject(["options",this.options,"nested",ym(this.nestedArray,e)])};B.prototype.addJSON=function(e){var r=this;if(e)for(var n=Object.keys(e),o=0,s;o<n.length;++o)s=e[n[o]],r.add((s.fields!==void 0?dr.fromJSON:s.values!==void 0?pr.fromJSON:s.methods!==void 0?tn.fromJSON:s.id!==void 0?mm.fromJSON:B.fromJSON)(n[o],s));return this};B.prototype.get=function(e){return this.nested&&this.nested[e]||null};B.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof pr)return this.nested[e].values;throw Error("no such enum: "+e)};B.prototype.add=function(e){if(!(e instanceof mm&&e.extend!==void 0||e instanceof dr||e instanceof I1||e instanceof pr||e instanceof tn||e instanceof B))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var r=this.get(e.name);if(r)if(r instanceof B&&e instanceof B&&!(r instanceof dr||r instanceof tn)){for(var n=r.nestedArray,o=0;o<n.length;++o)e.add(n[o]);this.remove(r),this.nested||(this.nested={}),e.setOptions(r.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),gm(this)};B.prototype.remove=function(e){if(!(e instanceof $i))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),gm(this)};B.prototype.define=function(e,r){if(_o.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var n=this;e.length>0;){var o=e.shift();if(n.nested&&n.nested[o]){if(n=n.nested[o],!(n instanceof B))throw Error("path conflicts with non-namespace objects")}else n.add(n=new B(o))}return r&&n.addJSON(r),n};B.prototype.resolveAll=function(){for(var e=this.nestedArray,r=0;r<e.length;)e[r]instanceof B?e[r++].resolveAll():e[r++].resolve();return this.resolve()};B.prototype.lookup=function(e,r,n){if(typeof r=="boolean"?(n=r,r=void 0):r&&!Array.isArray(r)&&(r=[r]),_o.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),r);var o=this.get(e[0]);if(o){if(e.length===1){if(!r||r.indexOf(o.constructor)>-1)return o}else if(o instanceof B&&(o=o.lookup(e.slice(1),r,!0)))return o}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof B&&(o=this._nestedArray[s].lookup(e,r,!0)))return o;return this.parent===null||n?null:this.parent.lookup(e,r)};B.prototype.lookupType=function(e){var r=this.lookup(e,[dr]);if(!r)throw Error("no such type: "+e);return r};B.prototype.lookupEnum=function(e){var r=this.lookup(e,[pr]);if(!r)throw Error("no such Enum '"+e+"' in "+this);return r};B.prototype.lookupTypeOrEnum=function(e){var r=this.lookup(e,[dr,pr]);if(!r)throw Error("no such Type or Enum '"+e+"' in "+this);return r};B.prototype.lookupService=function(e){var r=this.lookup(e,[tn]);if(!r)throw Error("no such Service '"+e+"' in "+this);return r};B._configure=function(t,e,r){dr=t,tn=e,pr=r}});var zi=S((a5,bm)=>{"use strict";bm.exports=at;var qi=kt();((at.prototype=Object.create(qi.prototype)).constructor=at).className="MapField";var N1=lr(),rn=ne();function at(t,e,r,n,o,s){if(qi.call(this,t,e,n,void 0,void 0,o,s),!rn.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}at.fromJSON=function(e,r){return new at(e,r.id,r.keyType,r.type,r.options,r.comment)};at.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return rn.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};at.prototype.resolve=function(){if(this.resolved)return this;if(N1.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return qi.prototype.resolve.call(this)};at.d=function(e,r,n){return typeof n=="function"?n=rn.decorateType(n).name:n&&typeof n=="object"&&(n=rn.decorateEnum(n).name),function(s,i){rn.decorateType(s.constructor).add(new at(i,e,r,n))}}});var Vi=S((c5,vm)=>{"use strict";vm.exports=Nt;var Hi=It();((Nt.prototype=Object.create(Hi.prototype)).constructor=Nt).className="Method";var mr=ne();function Nt(t,e,r,n,o,s,i,a,c){if(mr.isObject(o)?(i=o,o=s=void 0):mr.isObject(s)&&(i=s,s=void 0),!(e===void 0||mr.isString(e)))throw TypeError("type must be a string");if(!mr.isString(r))throw TypeError("requestType must be a string");if(!mr.isString(n))throw TypeError("responseType must be a string");Hi.call(this,t,i),this.type=e||"rpc",this.requestType=r,this.requestStream=o?!0:void 0,this.responseType=n,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=c}Nt.fromJSON=function(e,r){return new Nt(e,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)};Nt.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return mr.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:void 0,"parsedOptions",this.parsedOptions])};Nt.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Hi.prototype.resolve.call(this))}});var Gi=S((u5,Em)=>{"use strict";Em.exports=Ae;var bt=hr();((Ae.prototype=Object.create(bt.prototype)).constructor=Ae).className="Service";var Ji=Vi(),nn=ne(),R1=Ai();function Ae(t,e){bt.call(this,t,e),this.methods={},this._methodsArray=null}Ae.fromJSON=function(e,r){var n=new Ae(e,r.options);if(r.methods)for(var o=Object.keys(r.methods),s=0;s<o.length;++s)n.add(Ji.fromJSON(o[s],r.methods[o[s]]));return r.nested&&n.addJSON(r.nested),n.comment=r.comment,n};Ae.prototype.toJSON=function(e){var r=bt.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return nn.toObject(["options",r&&r.options||void 0,"methods",bt.arrayToJSON(this.methodsArray,e)||{},"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(Ae.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=nn.toArray(this.methods))}});function Dm(t){return t._methodsArray=null,t}Ae.prototype.get=function(e){return this.methods[e]||bt.prototype.get.call(this,e)};Ae.prototype.resolveAll=function(){for(var e=this.methodsArray,r=0;r<e.length;++r)e[r].resolve();return bt.prototype.resolve.call(this)};Ae.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Ji?(this.methods[e.name]=e,e.parent=this,Dm(this)):bt.prototype.add.call(this,e)};Ae.prototype.remove=function(e){if(e instanceof Ji){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,Dm(this)}return bt.prototype.remove.call(this,e)};Ae.prototype.create=function(e,r,n){for(var o=new R1.Service(e,r,n),s=0,i;s<this.methodsArray.length;++s){var a=nn.lcFirst((i=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");o[a]=nn.codegen(["r","c"],nn.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return o}});var Po=S((f5,xm)=>{"use strict";xm.exports=Ke;var B1=Je();function Ke(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]]}Ke.create=function(e){return this.$type.create(e)};Ke.encode=function(e,r){return this.$type.encode(e,r)};Ke.encodeDelimited=function(e,r){return this.$type.encodeDelimited(e,r)};Ke.decode=function(e){return this.$type.decode(e)};Ke.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Ke.verify=function(e){return this.$type.verify(e)};Ke.fromObject=function(e){return this.$type.fromObject(e)};Ke.toObject=function(e,r){return this.$type.toObject(e,r)};Ke.prototype.toJSON=function(){return this.$type.toObject(this,B1.toJSONOptions)}});var Wi=S((l5,Tm)=>{"use strict";Tm.exports=L1;var U1=Xe(),ct=lr(),Sm=ne();function F1(t){return"missing required '"+t.name+"'"}function L1(t){var e=Sm.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var r=0;r<t.fieldsArray.length;++r){var n=t._fieldsArray[r].resolve(),o=n.resolvedType instanceof U1?"int32":n.type,s="m"+Sm.safeProp(n.name);e("case %i: {",n.id),n.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),ct.defaults[n.keyType]!==void 0?e("k=%j",ct.defaults[n.keyType]):e("k=null"),ct.defaults[o]!==void 0?e("value=%j",ct.defaults[o]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),ct.basic[o]===void 0?e("value=types[%i].decode(r,r.uint32())",r):e("value=r.%s()",o),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),ct.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):n.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),ct.packed[o]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,o)("}else"),ct.basic[o]===void 0?e(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,r):e("%s.push(r.%s())",s,o)):ct.basic[o]===void 0?e(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,r):e("%s=r.%s()",s,o),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t._fieldsArray.length;++r){var i=t._fieldsArray[r];i.required&&e("if(!m.hasOwnProperty(%j))",i.name)("throw util.ProtocolError(%j,{instance:m})",F1(i))}return e("return m")}});var Qi=S((d5,Cm)=>{"use strict";Cm.exports=$1;var j1=Xe(),Xi=ne();function _e(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function Ki(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof j1){t("switch(%s){",n)("default:")("return%j",_e(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),s=0;s<o.length;++s)t("case %i:",e.resolvedType.values[o[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",_e(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",_e(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",_e(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",_e(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",_e(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",_e(e,"buffer"));break}return t}function M1(t,e,r){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",_e(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",_e(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",_e(e,"boolean key"));break}return t}function $1(t){var e=Xi.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,n={};r.length&&e("var p={}");for(var o=0;o<t.fieldsArray.length;++o){var s=t._fieldsArray[o].resolve(),i="m"+Xi.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",i,s.name),s.map)e("if(!util.isObject(%s))",i)("return%j",_e(s,"object"))("var k=Object.keys(%s)",i)("for(var i=0;i<k.length;++i){"),M1(e,s,"k[i]"),Ki(e,s,o,i+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",i)("return%j",_e(s,"array"))("for(var i=0;i<%s.length;++i){",i),Ki(e,s,o,i+"[i]")("}");else{if(s.partOf){var a=Xi.safeProp(s.partOf.name);n[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,e("p%s=1",a)}Ki(e,s,o,i)}s.optional&&e("}")}return e("return null")}});var ea=S(_m=>{"use strict";var Am=_m,on=Xe(),Qe=ne();function Yi(t,e,r,n){var o=!1;if(e.resolvedType)if(e.resolvedType instanceof on){t("switch(d%s){",n);for(var s=e.resolvedType.values,i=Object.keys(s),a=0;a<i.length;++a)s[i[a]]===e.typeDefault&&!o&&(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),e.repeated||t("break"),o=!0),t("case%j:",i[a])("case %i:",s[i[a]])("m%s=%j",n,s[i[a]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n);break}}return t}Am.fromObject=function(e){var r=e.fieldsArray,n=Qe.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return n("return new this.ctor");n("var m=new this.ctor");for(var o=0;o<r.length;++o){var s=r[o].resolve(),i=Qe.safeProp(s.name);s.map?(n("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),Yi(n,s,o,i+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),Yi(n,s,o,i+"[i]")("}")("}")):(s.resolvedType instanceof on||n("if(d%s!=null){",i),Yi(n,s,o,i),s.resolvedType instanceof on||n("}"))}return n("return m")};function Zi(t,e,r,n){if(e.resolvedType)e.resolvedType instanceof on?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var o=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n);break}}return t}Am.toObject=function(e){var r=e.fieldsArray.slice().sort(Qe.compareFieldsById);if(!r.length)return Qe.codegen()("return {}");for(var n=Qe.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),o=[],s=[],i=[],a=0;a<r.length;++a)r[a].partOf||(r[a].resolve().repeated?o:r[a].map?s:i).push(r[a]);if(o.length){for(n("if(o.arrays||o.defaults){"),a=0;a<o.length;++a)n("d%s=[]",Qe.safeProp(o[a].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),a=0;a<s.length;++a)n("d%s={}",Qe.safeProp(s[a].name));n("}")}if(i.length){for(n("if(o.defaults){"),a=0;a<i.length;++a){var c=i[a],u=Qe.safeProp(c.name);if(c.resolvedType instanceof on)n("d%s=o.enums===String?%j:%j",u,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var f="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",u,f)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else n("d%s=%j",u,c.typeDefault)}n("}")}var l=!1;for(a=0;a<r.length;++a){var c=r[a],y=e._fieldsArray.indexOf(c),u=Qe.safeProp(c.name);c.map?(l||(l=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),Zi(n,c,y,u+"[ks2[j]]")("}")):c.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),Zi(n,c,y,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,c.name),Zi(n,c,y,u),c.partOf&&n("if(o.oneofs)")("d%s=%j",Qe.safeProp(c.partOf.name),c.name)),n("}")}return n("return d")}});var ta=S(Pm=>{"use strict";var q1=Pm,z1=Po();q1[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),r=this.lookup(e);if(r){var n=t["@type"].charAt(0)==="."?t["@type"].slice(1):t["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r="type.googleapis.com/",n="",o="";if(e&&e.json&&t.type_url&&t.value){o=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var s=this.lookup(o);s&&(t=s.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof z1){var i=t.$type.toObject(t,e),a=t.$type.fullName[0]==="."?t.$type.fullName.slice(1):t.$type.fullName;return n===""&&(n=r),o=n+a,i["@type"]=o,i}return this.toObject(t,e)}}});var sa=S((m5,km)=>{"use strict";km.exports=L;var je=hr();((L.prototype=Object.create(je.prototype)).constructor=L).className="Type";var H1=Xe(),oa=en(),Oo=kt(),V1=zi(),J1=Gi(),ra=Po(),na=ao(),G1=so(),ie=ne(),W1=ia(),X1=Wi(),K1=Qi(),Om=ea(),Q1=ta();function L(t,e){je.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(L.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ie.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ie.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=L.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof ra||((t.prototype=new ra).constructor=t,ie.merge(t.prototype,e)),t.$type=t.prototype.$type=this,ie.merge(t,ra,!0),this._ctor=t;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:ie.oneOfGetter(this._oneofsArray[r].oneof),set:ie.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(t.prototype,n)}}});L.generateConstructor=function(e){for(var r=ie.codegen(["p"],e.name),n=0,o;n<e.fieldsArray.length;++n)(o=e._fieldsArray[n]).map?r("this%s={}",ie.safeProp(o.name)):o.repeated&&r("this%s=[]",ie.safeProp(o.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function ko(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}L.fromJSON=function(e,r){var n=new L(e,r.options);n.extensions=r.extensions,n.reserved=r.reserved;for(var o=Object.keys(r.fields),s=0;s<o.length;++s)n.add((typeof r.fields[o[s]].keyType<"u"?V1.fromJSON:Oo.fromJSON)(o[s],r.fields[o[s]]));if(r.oneofs)for(o=Object.keys(r.oneofs),s=0;s<o.length;++s)n.add(oa.fromJSON(o[s],r.oneofs[o[s]]));if(r.nested)for(o=Object.keys(r.nested),s=0;s<o.length;++s){var i=r.nested[o[s]];n.add((i.id!==void 0?Oo.fromJSON:i.fields!==void 0?L.fromJSON:i.values!==void 0?H1.fromJSON:i.methods!==void 0?J1.fromJSON:je.fromJSON)(o[s],i))}return r.extensions&&r.extensions.length&&(n.extensions=r.extensions),r.reserved&&r.reserved.length&&(n.reserved=r.reserved),r.group&&(n.group=!0),r.comment&&(n.comment=r.comment),n};L.prototype.toJSON=function(e){var r=je.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return ie.toObject(["options",r&&r.options||void 0,"oneofs",je.arrayToJSON(this.oneofsArray,e),"fields",je.arrayToJSON(this.fieldsArray.filter(function(o){return!o.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};L.prototype.resolveAll=function(){for(var e=this.fieldsArray,r=0;r<e.length;)e[r++].resolve();var n=this.oneofsArray;for(r=0;r<n.length;)n[r++].resolve();return je.prototype.resolveAll.call(this)};L.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};L.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Oo&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),ko(this)}return e instanceof oa?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),ko(this)):je.prototype.add.call(this,e)};L.prototype.remove=function(e){if(e instanceof Oo&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),ko(this)}if(e instanceof oa){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),ko(this)}return je.prototype.remove.call(this,e)};L.prototype.isReservedId=function(e){return je.isReservedId(this.reserved,e)};L.prototype.isReservedName=function(e){return je.isReservedName(this.reserved,e)};L.prototype.create=function(e){return new this.ctor(e)};L.prototype.setup=function(){for(var e=this.fullName,r=[],n=0;n<this.fieldsArray.length;++n)r.push(this._fieldsArray[n].resolve().resolvedType);this.encode=W1(this)({Writer:G1,types:r,util:ie}),this.decode=X1(this)({Reader:na,types:r,util:ie}),this.verify=K1(this)({types:r,util:ie}),this.fromObject=Om.fromObject(this)({types:r,util:ie}),this.toObject=Om.toObject(this)({types:r,util:ie});var o=Q1[e];if(o){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=o.fromObject.bind(s),s.toObject=this.toObject,this.toObject=o.toObject.bind(s)}return this};L.prototype.encode=function(e,r){return this.setup().encode(e,r)};L.prototype.encodeDelimited=function(e,r){return this.encode(e,r&&r.len?r.fork():r).ldelim()};L.prototype.decode=function(e,r){return this.setup().decode(e,r)};L.prototype.decodeDelimited=function(e){return e instanceof na||(e=na.create(e)),this.decode(e,e.uint32())};L.prototype.verify=function(e){return this.setup().verify(e)};L.prototype.fromObject=function(e){return this.setup().fromObject(e)};L.prototype.toObject=function(e,r){return this.setup().toObject(e,r)};L.d=function(e){return function(n){ie.decorateType(n,e)}}});var ua=S((y5,Um)=>{"use strict";Um.exports=ge;var No=hr();((ge.prototype=Object.create(No.prototype)).constructor=ge).className="Root";var ca=kt(),Nm=Xe(),Y1=en(),vt=ne(),Rm,aa,sn;function ge(t){No.call(this,"",t),this.deferred=[],this.files=[]}ge.fromJSON=function(e,r){return r||(r=new ge),e.options&&r.setOptions(e.options),r.addJSON(e.nested)};ge.prototype.resolvePath=vt.path.resolve;ge.prototype.fetch=vt.fetch;function Bm(){}ge.prototype.load=function t(e,r,n){typeof r=="function"&&(n=r,r=void 0);var o=this;if(!n)return vt.asPromise(t,o,e,r);var s=n===Bm;function i(w,h){if(!!n){var d=n;if(n=null,s)throw w;d(w,h)}}function a(w){var h=w.lastIndexOf("google/protobuf/");if(h>-1){var d=w.substring(h);if(d in sn)return d}return null}function c(w,h){try{if(vt.isString(h)&&h.charAt(0)==="{"&&(h=JSON.parse(h)),!vt.isString(h))o.setOptions(h.options).addJSON(h.nested);else{aa.filename=w;var d=aa(h,o,r),b,D=0;if(d.imports)for(;D<d.imports.length;++D)(b=a(d.imports[D])||o.resolvePath(w,d.imports[D]))&&u(b);if(d.weakImports)for(D=0;D<d.weakImports.length;++D)(b=a(d.weakImports[D])||o.resolvePath(w,d.weakImports[D]))&&u(b,!0)}}catch(A){i(A)}!s&&!f&&i(null,o)}function u(w,h){if(!(o.files.indexOf(w)>-1)){if(o.files.push(w),w in sn){s?c(w,sn[w]):(++f,setTimeout(function(){--f,c(w,sn[w])}));return}if(s){var d;try{d=vt.fs.readFileSync(w).toString("utf8")}catch(b){h||i(b);return}c(w,d)}else++f,o.fetch(w,function(b,D){if(--f,!!n){if(b){h?f||i(null,o):i(b);return}c(w,D)}})}}var f=0;vt.isString(e)&&(e=[e]);for(var l=0,y;l<e.length;++l)(y=o.resolvePath("",e[l]))&&u(y);if(s)return o;f||i(null,o)};ge.prototype.loadSync=function(e,r){if(!vt.isNode)throw Error("not supported");return this.load(e,r,Bm)};ge.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return No.prototype.resolveAll.call(this)};var Io=/^[A-Z]/;function Im(t,e){var r=e.parent.lookup(e.extend);if(r){var n=new ca(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.declaringField=e,e.extensionField=n,r.add(n),!0}return!1}ge.prototype._handleAdd=function(e){if(e instanceof ca)e.extend!==void 0&&!e.extensionField&&(Im(this,e)||this.deferred.push(e));else if(e instanceof Nm)Io.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof Y1)){if(e instanceof Rm)for(var r=0;r<this.deferred.length;)Im(this,this.deferred[r])?this.deferred.splice(r,1):++r;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);Io.test(e.name)&&(e.parent[e.name]=e)}};ge.prototype._handleRemove=function(e){if(e instanceof ca){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var r=this.deferred.indexOf(e);r>-1&&this.deferred.splice(r,1)}}else if(e instanceof Nm)Io.test(e.name)&&delete e.parent[e.name];else if(e instanceof No){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);Io.test(e.name)&&delete e.parent[e.name]}};ge._configure=function(t,e,r){Rm=t,aa=e,sn=r}});var ne=S((g5,Lm)=>{"use strict";var H=Lm.exports=Je(),Fm=_i(),fa,la;H.codegen=rm();H.fetch=om();H.path=am();H.fs=H.inquire("fs");H.toArray=function(e){if(e){for(var r=Object.keys(e),n=new Array(r.length),o=0;o<r.length;)n[o]=e[r[o++]];return n}return[]};H.toObject=function(e){for(var r={},n=0;n<e.length;){var o=e[n++],s=e[n++];s!==void 0&&(r[o]=s)}return r};var Z1=/\\/g,eD=/"/g;H.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};H.safeProp=function(e){return!/^[$\w_]+$/.test(e)||H.isReserved(e)?'["'+e.replace(Z1,"\\\\").replace(eD,'\\"')+'"]':"."+e};H.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var tD=/_([a-z])/g;H.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(tD,function(r,n){return n.toUpperCase()})};H.compareFieldsById=function(e,r){return e.id-r.id};H.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(H.decorateRoot.remove(e.$type),e.$type.name=r,H.decorateRoot.add(e.$type)),e.$type;fa||(fa=sa());var n=new fa(r||e.name);return H.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var rD=0;H.decorateEnum=function(e){if(e.$type)return e.$type;la||(la=Xe());var r=new la("Enum"+rD++,e);return H.decorateRoot.add(r),Object.defineProperty(e,"$type",{value:r,enumerable:!1}),r};H.setProperty=function(e,r,n){function o(s,i,a){var c=i.shift();if(c==="__proto__")return s;if(i.length>0)s[c]=o(s[c]||{},i,a);else{var u=s[c];u&&(a=[].concat(u).concat(a)),s[c]=a}return s}if(typeof e!="object")throw TypeError("dst must be an object");if(!r)throw TypeError("path must be specified");return r=r.split("."),o(e,r,n)};Object.defineProperty(H,"decorateRoot",{get:function(){return Fm.decorated||(Fm.decorated=new(ua()))}})});var It=S((w5,jm)=>{"use strict";jm.exports=we;we.className="ReflectionObject";var Ro=ne(),Bo;function we(t,e){if(!Ro.isString(t))throw TypeError("name must be a string");if(e&&!Ro.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(we.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});we.prototype.toJSON=function(){throw Error()};we.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var r=e.root;r instanceof Bo&&r._handleAdd(this)};we.prototype.onRemove=function(e){var r=e.root;r instanceof Bo&&r._handleRemove(this),this.parent=null,this.resolved=!1};we.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Bo&&(this.resolved=!0),this)};we.prototype.getOption=function(e){if(this.options)return this.options[e]};we.prototype.setOption=function(e,r,n){return(!n||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=r),this};we.prototype.setParsedOption=function(e,r,n){this.parsedOptions||(this.parsedOptions=[]);var o=this.parsedOptions;if(n){var s=o.find(function(c){return Object.prototype.hasOwnProperty.call(c,e)});if(s){var i=s[e];Ro.setProperty(i,n,r)}else s={},s[e]=Ro.setProperty({},n,r),o.push(s)}else{var a={};a[e]=r,o.push(a)}return this};we.prototype.setOptions=function(e,r){if(e)for(var n=Object.keys(e),o=0;o<n.length;++o)this.setOption(n[o],e[n[o]],r);return this};we.prototype.toString=function(){var e=this.constructor.className,r=this.fullName;return r.length?e+" "+r:e};we._configure=function(t){Bo=t}});var Xe=S((b5,qm)=>{"use strict";qm.exports=Ye;var Mm=It();((Ye.prototype=Object.create(Mm.prototype)).constructor=Ye).className="Enum";var $m=hr(),Uo=ne();function Ye(t,e,r,n,o,s){if(Mm.call(this,t,r),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=o||{},this.valuesOptions=s,this.reserved=void 0,e)for(var i=Object.keys(e),a=0;a<i.length;++a)typeof e[i[a]]=="number"&&(this.valuesById[this.values[i[a]]=e[i[a]]]=i[a])}Ye.fromJSON=function(e,r){var n=new Ye(e,r.values,r.options,r.comment,r.comments);return n.reserved=r.reserved,n};Ye.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Uo.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",r?this.comment:void 0,"comments",r?this.comments:void 0])};Ye.prototype.add=function(e,r,n,o){if(!Uo.isString(e))throw TypeError("name must be a string");if(!Uo.isInteger(r))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[r]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+r+" in "+this);this.values[e]=r}else this.valuesById[this.values[e]=r]=e;return o&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=o||null),this.comments[e]=n||null,this};Ye.prototype.remove=function(e){if(!Uo.isString(e))throw TypeError("name must be a string");var r=this.values[e];if(r==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};Ye.prototype.isReservedId=function(e){return $m.isReservedId(this.reserved,e)};Ye.prototype.isReservedName=function(e){return $m.isReservedName(this.reserved,e)}});var ia=S((v5,Hm)=>{"use strict";Hm.exports=oD;var nD=Xe(),da=lr(),pa=ne();function zm(t,e,r,n){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(e.id<<3|2)>>>0)}function oD(t){for(var e=pa.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r,n,o=t.fieldsArray.slice().sort(pa.compareFieldsById),r=0;r<o.length;++r){var s=o[r].resolve(),i=t._fieldsArray.indexOf(s),a=s.resolvedType instanceof nD?"int32":s.type,c=da.basic[a];n="m"+pa.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|da.mapKey[s.keyType],s.keyType),c===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",i,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|c,a,n),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",n,n),s.packed&&da.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",a,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),c===void 0?zm(e,s,i,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|c)>>>0,a,n)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,s.name),c===void 0?zm(e,s,i,n):e("w.uint32(%i).%s(%s)",(s.id<<3|c)>>>0,a,n))}return e("return w")}});var Jm=S((D5,Vm)=>{"use strict";var I=Vm.exports=Pi();I.build="light";function sD(t,e,r){return typeof e=="function"?(r=e,e=new I.Root):e||(e=new I.Root),e.load(t,r)}I.load=sD;function iD(t,e){return e||(e=new I.Root),e.loadSync(t)}I.loadSync=iD;I.encoder=ia();I.decoder=Wi();I.verifier=Qi();I.converter=ea();I.ReflectionObject=It();I.Namespace=hr();I.Root=ua();I.Enum=Xe();I.Type=sa();I.Field=kt();I.OneOf=en();I.MapField=zi();I.Service=Gi();I.Method=Vi();I.Message=Po();I.wrappers=ta();I.types=lr();I.util=ne();I.ReflectionObject._configure(I.Root);I.Namespace._configure(I.Type,I.Service,I.Enum);I.Root._configure(I.Type);I.Field._configure(I.Type)});var Wm=S((E5,Gm)=>{"use strict";Gm.exports=Jm()});var ya=S((an,ma)=>{(function(t,e){if(typeof an=="object"&&typeof ma=="object")ma.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var r=e();for(var n in r)(typeof an=="object"?an:t)[n]=r[n]}})(an,function(){return t={418:function(r,n){(function(o,s){for(var i in s)o[i]=s[i]})(n,function(o){var s={};function i(a){if(s[a])return s[a].exports;var c=s[a]={i:a,l:!1,exports:{}};return o[a].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=o,i.c=s,i.i=function(a){return a},i.d=function(a,c,u){i.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:u})},i.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(c,"a",c),c},i.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},i.p="",i(i.s=1)}([function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i(3),c=function(){function u(f,l){f===void 0&&(f={}),l===void 0&&(l={splitValues:!1});var y,w=this;this.headersMap={},f&&(typeof Headers<"u"&&f instanceof Headers?a.getHeaderKeys(f).forEach(function(h){a.getHeaderValues(f,h).forEach(function(d){l.splitValues?w.append(h,a.splitHeaderValue(d)):w.append(h,d)})}):typeof(y=f)=="object"&&typeof y.headersMap=="object"&&typeof y.forEach=="function"?f.forEach(function(h,d){w.append(h,d)}):typeof Map<"u"&&f instanceof Map?f.forEach(function(h,d){w.append(d,h)}):typeof f=="string"?this.appendFromString(f):typeof f=="object"&&Object.getOwnPropertyNames(f).forEach(function(h){var d=f[h];Array.isArray(d)?d.forEach(function(b){w.append(h,b)}):w.append(h,d)}))}return u.prototype.appendFromString=function(f){for(var l=f.split(`\r
`),y=0;y<l.length;y++){var w=l[y],h=w.indexOf(":");if(h>0){var d=w.substring(0,h).trim(),b=w.substring(h+1).trim();this.append(d,b)}}},u.prototype.delete=function(f,l){var y=a.normalizeName(f);if(l===void 0)delete this.headersMap[y];else{var w=this.headersMap[y];if(w){var h=w.indexOf(l);h>=0&&w.splice(h,1),w.length===0&&delete this.headersMap[y]}}},u.prototype.append=function(f,l){var y=this,w=a.normalizeName(f);Array.isArray(this.headersMap[w])||(this.headersMap[w]=[]),Array.isArray(l)?l.forEach(function(h){y.headersMap[w].push(a.normalizeValue(h))}):this.headersMap[w].push(a.normalizeValue(l))},u.prototype.set=function(f,l){var y=a.normalizeName(f);if(Array.isArray(l)){var w=[];l.forEach(function(h){w.push(a.normalizeValue(h))}),this.headersMap[y]=w}else this.headersMap[y]=[a.normalizeValue(l)]},u.prototype.has=function(f,l){var y=this.headersMap[a.normalizeName(f)];if(!Array.isArray(y))return!1;if(l!==void 0){var w=a.normalizeValue(l);return y.indexOf(w)>=0}return!0},u.prototype.get=function(f){var l=this.headersMap[a.normalizeName(f)];return l!==void 0?l.concat():[]},u.prototype.forEach=function(f){var l=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(y){f(y,l.headersMap[y])},this)},u.prototype.toHeaders=function(){if(typeof Headers<"u"){var f=new Headers;return this.forEach(function(l,y){y.forEach(function(w){f.append(l,w)})}),f}throw new Error("Headers class is not defined")},u}();s.BrowserHeaders=c},function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i(0);s.BrowserHeaders=a.BrowserHeaders},function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.iterateHeaders=function(a,c){for(var u=a[Symbol.iterator](),f=u.next();!f.done;)c(f.value[0]),f=u.next()},s.iterateHeadersKeys=function(a,c){for(var u=a.keys(),f=u.next();!f.done;)c(f.value),f=u.next()}},function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i(2);s.normalizeName=function(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()},s.normalizeValue=function(c){return typeof c!="string"&&(c=String(c)),c},s.getHeaderValues=function(c,u){var f=c;if(f instanceof Headers&&f.getAll)return f.getAll(u);var l=f.get(u);return l&&typeof l=="string"?[l]:l},s.getHeaderKeys=function(c){var u=c,f={},l=[];return u.keys?a.iterateHeadersKeys(u,function(y){f[y]||(f[y]=!0,l.push(y))}):u.forEach?u.forEach(function(y,w){f[w]||(f[w]=!0,l.push(w))}):a.iterateHeaders(u,function(y){var w=y[0];f[w]||(f[w]=!0,l.push(w))}),l},s.splitHeaderValue=function(c){var u=[];return c.split(", ").forEach(function(f){f.split(",").forEach(function(l){u.push(l)})}),u}}]))},617:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ChunkParser=n.ChunkType=n.encodeASCII=n.decodeASCII=void 0;var s,i=o(65);function a(h){return(d=h)===9||d===10||d===13||h>=32&&h<=126;var d}function c(h){for(var d=0;d!==h.length;++d)if(!a(h[d]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(h))}function u(h){return(128&h.getUint8(0))==128}function f(h){return h.getUint32(1,!1)}function l(h,d,b){return h.byteLength-d>=b}function y(h,d,b){if(h.slice)return h.slice(d,b);var D=h.length;b!==void 0&&(D=b);for(var A=new Uint8Array(D-d),F=0,j=d;j<D;j++)A[F++]=h[j];return A}n.decodeASCII=c,n.encodeASCII=function(h){for(var d=new Uint8Array(h.length),b=0;b!==h.length;++b){var D=h.charCodeAt(b);if(!a(D))throw new Error("Metadata contains invalid ASCII");d[b]=D}return d},function(h){h[h.MESSAGE=1]="MESSAGE",h[h.TRAILERS=2]="TRAILERS"}(s=n.ChunkType||(n.ChunkType={}));var w=function(){function h(){this.buffer=null,this.position=0}return h.prototype.parse=function(d,b){if(d.length===0&&b)return[];var D,A=[];if(this.buffer==null)this.buffer=d,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=d,this.position=0;else{var F=this.buffer.byteLength-this.position,j=new Uint8Array(F+d.byteLength),fe=y(this.buffer,this.position);j.set(fe,0);var ce=new Uint8Array(d);j.set(ce,F),this.buffer=j,this.position=0}for(;;){if(!l(this.buffer,this.position,5))return A;var ee=y(this.buffer,this.position,this.position+5),ae=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),Me=f(ae);if(!l(this.buffer,this.position,5+Me))return A;var Da=y(this.buffer,this.position+5,this.position+5+Me);if(this.position+=5+Me,u(ae))return A.push({chunkType:s.TRAILERS,trailers:(D=Da,new i.Metadata(c(D)))}),A;A.push({chunkType:s.MESSAGE,data:Da})}},h}();n.ChunkParser=w},8:function(r,n){"use strict";var o;Object.defineProperty(n,"__esModule",{value:!0}),n.httpStatusToCode=n.Code=void 0,function(s){s[s.OK=0]="OK",s[s.Canceled=1]="Canceled",s[s.Unknown=2]="Unknown",s[s.InvalidArgument=3]="InvalidArgument",s[s.DeadlineExceeded=4]="DeadlineExceeded",s[s.NotFound=5]="NotFound",s[s.AlreadyExists=6]="AlreadyExists",s[s.PermissionDenied=7]="PermissionDenied",s[s.ResourceExhausted=8]="ResourceExhausted",s[s.FailedPrecondition=9]="FailedPrecondition",s[s.Aborted=10]="Aborted",s[s.OutOfRange=11]="OutOfRange",s[s.Unimplemented=12]="Unimplemented",s[s.Internal=13]="Internal",s[s.Unavailable=14]="Unavailable",s[s.DataLoss=15]="DataLoss",s[s.Unauthenticated=16]="Unauthenticated"}(o=n.Code||(n.Code={})),n.httpStatusToCode=function(s){switch(s){case 0:return o.Internal;case 200:return o.OK;case 400:return o.InvalidArgument;case 401:return o.Unauthenticated;case 403:return o.PermissionDenied;case 404:return o.NotFound;case 409:return o.Aborted;case 412:return o.FailedPrecondition;case 429:return o.ResourceExhausted;case 499:return o.Canceled;case 500:return o.Unknown;case 501:return o.Unimplemented;case 503:return o.Unavailable;case 504:return o.DeadlineExceeded;default:return o.Unknown}}},934:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.client=void 0;var s=o(65),i=o(617),a=o(8),c=o(346),u=o(57),f=o(882);n.client=function(w,h){return new l(w,h)};var l=function(){function w(h,d){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new i.ChunkParser,this.methodDefinition=h,this.props=d,this.createTransport()}return w.prototype.createTransport=function(){var h=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,d={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:h,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(d):this.transport=u.makeDefaultTransport(d)},w.prototype.onTransportHeaders=function(h,d){if(this.props.debug&&c.debug("onHeaders",h,d),this.closed)this.props.debug&&c.debug("grpc.onHeaders received after request was closed - ignoring");else if(d!==0){this.responseHeaders=h,this.props.debug&&c.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var b=y(h);this.props.debug&&c.debug("onHeaders.gRPCStatus",b);var D=b&&b>=0?b:a.httpStatusToCode(d);this.props.debug&&c.debug("onHeaders.code",D);var A=h.get("grpc-message")||[];if(this.props.debug&&c.debug("onHeaders.gRPCMessage",A),this.rawOnHeaders(h),D!==a.Code.OK){var F=this.decodeGRPCStatus(A[0]);this.rawOnError(D,F,h)}}},w.prototype.onTransportChunk=function(h){var d=this;if(this.closed)this.props.debug&&c.debug("grpc.onChunk received after request was closed - ignoring");else{var b=[];try{b=this.parser.parse(h)}catch(D){return this.props.debug&&c.debug("onChunk.parsing error",D,D.message),void this.rawOnError(a.Code.Internal,"parsing error: "+D.message)}b.forEach(function(D){if(D.chunkType===i.ChunkType.MESSAGE){var A=d.methodDefinition.responseType.deserializeBinary(D.data);d.rawOnMessage(A)}else D.chunkType===i.ChunkType.TRAILERS&&(d.responseHeaders?(d.responseTrailers=new s.Metadata(D.trailers),d.props.debug&&c.debug("onChunk.trailers",d.responseTrailers)):(d.responseHeaders=new s.Metadata(D.trailers),d.rawOnHeaders(d.responseHeaders)))})}},w.prototype.onTransportEnd=function(){if(this.props.debug&&c.debug("grpc.onEnd"),this.closed)this.props.debug&&c.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var h=y(this.responseTrailers);if(h!==null){var d=this.responseTrailers.get("grpc-message"),b=this.decodeGRPCStatus(d[0]);this.rawOnEnd(h,b,this.responseTrailers)}else this.rawOnError(a.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(a.Code.Unknown,"Response closed without headers");var D=y(this.responseHeaders),A=this.responseHeaders.get("grpc-message");if(this.props.debug&&c.debug("grpc.headers only response ",D,A),D===null)return void this.rawOnEnd(a.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var F=this.decodeGRPCStatus(A[0]);this.rawOnEnd(D,F,this.responseHeaders)}},w.prototype.decodeGRPCStatus=function(h){if(!h)return"";try{return decodeURIComponent(h)}catch{return h}},w.prototype.rawOnEnd=function(h,d,b){var D=this;this.props.debug&&c.debug("rawOnEnd",h,d,b),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(A){if(!D.closed)try{A(h,d,b)}catch(F){setTimeout(function(){throw F},0)}}))},w.prototype.rawOnHeaders=function(h){this.props.debug&&c.debug("rawOnHeaders",h),this.completed||this.onHeadersCallbacks.forEach(function(d){try{d(h)}catch(b){setTimeout(function(){throw b},0)}})},w.prototype.rawOnError=function(h,d,b){var D=this;b===void 0&&(b=new s.Metadata),this.props.debug&&c.debug("rawOnError",h,d),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(A){if(!D.closed)try{A(h,d,b)}catch(F){setTimeout(function(){throw F},0)}}))},w.prototype.rawOnMessage=function(h){var d=this;this.props.debug&&c.debug("rawOnMessage",h.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(b){if(!d.closed)try{b(h)}catch(D){setTimeout(function(){throw D},0)}})},w.prototype.onHeaders=function(h){this.onHeadersCallbacks.push(h)},w.prototype.onMessage=function(h){this.onMessageCallbacks.push(h)},w.prototype.onEnd=function(h){this.onEndCallbacks.push(h)},w.prototype.start=function(h){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var d=new s.Metadata(h||{});d.set("content-type","application/grpc-web+proto"),d.set("x-grpc-web","1"),this.transport.start(d)},w.prototype.send=function(h){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var d=f.frameRequest(h);this.transport.sendMessage(d)},w.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},w.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&c.debug("request.abort aborting request"),this.transport.cancel()},w}();function y(w){var h=w.get("grpc-status")||[];if(h.length>0)try{var d=h[0];return parseInt(d,10)}catch{return null}return null}},346:function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.debug=void 0,n.debug=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];console.debug?console.debug.apply(null,o):console.log.apply(null,o)}},607:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.grpc=void 0;var s,i=o(418),a=o(57),c=o(229),u=o(540),f=o(210),l=o(859),y=o(8),w=o(938),h=o(35),d=o(934);(s=n.grpc||(n.grpc={})).setDefaultTransport=a.setDefaultTransportFactory,s.CrossBrowserHttpTransport=l.CrossBrowserHttpTransport,s.FetchReadableStreamTransport=c.FetchReadableStreamTransport,s.XhrTransport=f.XhrTransport,s.WebsocketTransport=u.WebsocketTransport,s.Code=y.Code,s.Metadata=i.BrowserHeaders,s.client=function(b,D){return d.client(b,D)},s.invoke=w.invoke,s.unary=h.unary},938:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.invoke=void 0;var s=o(934);n.invoke=function(i,a){if(i.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var c=s.client(i,{host:a.host,transport:a.transport,debug:a.debug});return a.onHeaders&&c.onHeaders(a.onHeaders),a.onMessage&&c.onMessage(a.onMessage),a.onEnd&&c.onEnd(a.onEnd),c.start(a.metadata),c.send(a.request),c.finishSend(),{close:function(){c.close()}}}},65:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var s=o(418);Object.defineProperty(n,"Metadata",{enumerable:!0,get:function(){return s.BrowserHeaders}})},57:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeDefaultTransport=n.setDefaultTransportFactory=void 0;var s=o(859),i=function(a){return s.CrossBrowserHttpTransport({withCredentials:!1})(a)};n.setDefaultTransportFactory=function(a){i=a},n.makeDefaultTransport=function(a){return i(a)}},229:function(r,n,o){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(u){for(var f,l=1,y=arguments.length;l<y;l++)for(var w in f=arguments[l])Object.prototype.hasOwnProperty.call(f,w)&&(u[w]=f[w]);return u}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.detectFetchSupport=n.FetchReadableStreamTransport=void 0;var i=o(65),a=o(346);n.FetchReadableStreamTransport=function(u){return function(f){return function(l,y){return l.debug&&a.debug("fetchRequest",l),new c(l,y)}(f,u)}};var c=function(){function u(f,l){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=f,this.init=l}return u.prototype.pump=function(f,l){var y=this;if(this.reader=f,this.cancelled)return this.options.debug&&a.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(w){y.options.debug&&a.debug("Fetch.pump.reader.cancel exception",w)});this.reader.read().then(function(w){if(w.done)return y.options.onEnd(),l;y.options.onChunk(w.value),y.pump(y.reader,l)}).catch(function(w){y.cancelled?y.options.debug&&a.debug("Fetch.catch - request cancelled"):(y.cancelled=!0,y.options.debug&&a.debug("Fetch.catch",w.message),y.options.onEnd(w))})},u.prototype.send=function(f){var l=this;fetch(this.options.url,s(s({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:f,signal:this.controller&&this.controller.signal})).then(function(y){if(l.options.debug&&a.debug("Fetch.response",y),l.options.onHeaders(new i.Metadata(y.headers),y.status),!y.body)return y;l.pump(y.body.getReader(),y)}).catch(function(y){l.cancelled?l.options.debug&&a.debug("Fetch.catch - request cancelled"):(l.cancelled=!0,l.options.debug&&a.debug("Fetch.catch",y.message),l.options.onEnd(y))})},u.prototype.sendMessage=function(f){this.send(f)},u.prototype.finishSend=function(){},u.prototype.start=function(f){this.metadata=f},u.prototype.cancel=function(){var f=this;this.cancelled?this.options.debug&&a.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&a.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&a.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&a.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(l){f.options.debug&&a.debug("Fetch.cancel.reader.cancel exception",l)})):this.options.debug&&a.debug("Fetch.cancel before reader"))},u}();n.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CrossBrowserHttpTransport=void 0;var s=o(229),i=o(210);n.CrossBrowserHttpTransport=function(a){if(s.detectFetchSupport()){var c={credentials:a.withCredentials?"include":"same-origin"};return s.FetchReadableStreamTransport(c)}return i.XhrTransport({withCredentials:a.withCredentials})}},210:function(r,n,o){"use strict";var s,i=this&&this.__extends||(s=function(h,d){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,D){b.__proto__=D}||function(b,D){for(var A in D)Object.prototype.hasOwnProperty.call(D,A)&&(b[A]=D[A])})(h,d)},function(h,d){function b(){this.constructor=h}s(h,d),h.prototype=d===null?Object.create(d):(b.prototype=d.prototype,new b)});Object.defineProperty(n,"__esModule",{value:!0}),n.stringToArrayBuffer=n.MozChunkedArrayBufferXHR=n.XHR=n.XhrTransport=void 0;var a=o(65),c=o(346),u=o(849);n.XhrTransport=function(h){return function(d){if(u.detectMozXHRSupport())return new l(d,h);if(u.detectXHROverrideMimeTypeSupport())return new f(d,h);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var f=function(){function h(d,b){this.options=d,this.init=b}return h.prototype.onProgressEvent=function(){this.options.debug&&c.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var d=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var b=w(d);this.options.onChunk(b)},h.prototype.onLoadEvent=function(){this.options.debug&&c.debug("XHR.onLoadEvent"),this.options.onEnd()},h.prototype.onStateChange=function(){this.options.debug&&c.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new a.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},h.prototype.sendMessage=function(d){this.xhr.send(d)},h.prototype.finishSend=function(){},h.prototype.start=function(d){var b=this;this.metadata=d;var D=new XMLHttpRequest;this.xhr=D,D.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(A,F){D.setRequestHeader(A,F.join(", "))}),D.withCredentials=Boolean(this.init.withCredentials),D.addEventListener("readystatechange",this.onStateChange.bind(this)),D.addEventListener("progress",this.onProgressEvent.bind(this)),D.addEventListener("loadend",this.onLoadEvent.bind(this)),D.addEventListener("error",function(A){b.options.debug&&c.debug("XHR.error",A),b.options.onEnd(A.error)})},h.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},h.prototype.cancel=function(){this.options.debug&&c.debug("XHR.abort"),this.xhr.abort()},h}();n.XHR=f;var l=function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return i(d,h),d.prototype.configureXhr=function(){this.options.debug&&c.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},d.prototype.onProgressEvent=function(){var b=this.xhr.response;this.options.debug&&c.debug("MozXHR.onProgressEvent: ",new Uint8Array(b)),this.options.onChunk(new Uint8Array(b))},d}(f);function y(h,d){var b=h.charCodeAt(d);if(b>=55296&&b<=56319){var D=h.charCodeAt(d+1);D>=56320&&D<=57343&&(b=65536+(b-55296<<10)+(D-56320))}return b}function w(h){for(var d=new Uint8Array(h.length),b=0,D=0;D<h.length;D++){var A=String.prototype.codePointAt?h.codePointAt(D):y(h,D);d[b++]=255&A}return d}n.MozChunkedArrayBufferXHR=l,n.stringToArrayBuffer=w},849:function(r,n){"use strict";var o;function s(){if(o!==void 0)return o;if(XMLHttpRequest){o=new XMLHttpRequest;try{o.open("GET","https://localhost")}catch{}}return o}function i(a){var c=s();if(!c)return!1;try{return c.responseType=a,c.responseType===a}catch{}return!1}Object.defineProperty(n,"__esModule",{value:!0}),n.detectXHROverrideMimeTypeSupport=n.detectMozXHRSupport=n.xhrSupportsResponseType=void 0,n.xhrSupportsResponseType=i,n.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&i("moz-chunked-arraybuffer")},n.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WebsocketTransport=void 0;var s,i=o(346),a=o(617);(function(u){u[u.FINISH_SEND=1]="FINISH_SEND"})(s||(s={}));var c=new Uint8Array([1]);n.WebsocketTransport=function(){return function(u){return function(f){f.debug&&i.debug("websocketRequest",f);var l,y=function(d){if(d.substr(0,8)==="https://")return"wss://"+d.substr(8);if(d.substr(0,7)==="http://")return"ws://"+d.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(f.url),w=[];function h(d){if(d===s.FINISH_SEND)l.send(c);else{var b=d,D=new Int8Array(b.byteLength+1);D.set(new Uint8Array([0])),D.set(b,1),l.send(D)}}return{sendMessage:function(d){l&&l.readyState!==l.CONNECTING?h(d):w.push(d)},finishSend:function(){l&&l.readyState!==l.CONNECTING?h(s.FINISH_SEND):w.push(s.FINISH_SEND)},start:function(d){(l=new WebSocket(y,["grpc-websockets"])).binaryType="arraybuffer",l.onopen=function(){var b;f.debug&&i.debug("websocketRequest.onopen"),l.send((b="",d.forEach(function(D,A){b+=D+": "+A.join(", ")+`\r
`}),a.encodeASCII(b))),w.forEach(function(D){h(D)})},l.onclose=function(b){f.debug&&i.debug("websocketRequest.onclose",b),f.onEnd()},l.onerror=function(b){f.debug&&i.debug("websocketRequest.onerror",b)},l.onmessage=function(b){f.onChunk(new Uint8Array(b.data))}},cancel:function(){f.debug&&i.debug("websocket.abort"),l.close()}}}(u)}}},35:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unary=void 0;var s=o(65),i=o(934);n.unary=function(a,c){if(a.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(a.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var u=null,f=null,l=i.client(a,{host:c.host,transport:c.transport,debug:c.debug});return l.onHeaders(function(y){u=y}),l.onMessage(function(y){f=y}),l.onEnd(function(y,w,h){c.onEnd({status:y,statusMessage:w,headers:u||new s.Metadata,message:f,trailers:h})}),l.start(c.metadata),l.send(c.request),l.finishSend(),{close:function(){l.close()}}}},882:function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.frameRequest=void 0,n.frameRequest=function(o){var s=o.serializeBinary(),i=new ArrayBuffer(s.byteLength+5);return new DataView(i,1,4).setUint32(0,s.length,!1),new Uint8Array(i,5).set(s),new Uint8Array(i)}}},e={},function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}(607);var t,e})});var by=S((k5,Mo)=>{var Ym,Zm,ey,ty,ry,ny,oy,sy,iy,Lo,wa,ay,cy,uy,gr,fy,ly,dy,py,hy,my,yy,gy,wy,jo;(function(t){var e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Mo=="object"&&typeof Mo.exports=="object"?t(r(e,r(Mo.exports))):t(r(e));function r(n,o){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,i){return n[s]=o?o(s,i):i}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])};Ym=function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(n,o);function s(){this.constructor=n}n.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)},Zm=Object.assign||function(n){for(var o,s=1,i=arguments.length;s<i;s++){o=arguments[s];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},ey=function(n,o){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)o.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(s[i[a]]=n[i[a]]);return s},ty=function(n,o,s,i){var a=arguments.length,c=a<3?o:i===null?i=Object.getOwnPropertyDescriptor(o,s):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,o,s,i);else for(var f=n.length-1;f>=0;f--)(u=n[f])&&(c=(a<3?u(c):a>3?u(o,s,c):u(o,s))||c);return a>3&&c&&Object.defineProperty(o,s,c),c},ry=function(n,o){return function(s,i){o(s,i,n)}},ny=function(n,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,o)},oy=function(n,o,s,i){function a(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(w){try{y(i.next(w))}catch(h){u(h)}}function l(w){try{y(i.throw(w))}catch(h){u(h)}}function y(w){w.done?c(w.value):a(w.value).then(f,l)}y((i=i.apply(n,o||[])).next())})},sy=function(n,o){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(y){return function(w){return l([y,w])}}function l(y){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,a=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){s.label=y[1];break}if(y[0]===6&&s.label<c[1]){s.label=c[1],c=y;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(y);break}c[2]&&s.ops.pop(),s.trys.pop();continue}y=o.call(n,s)}catch(w){y=[6,w],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},iy=function(n,o){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&jo(o,n,s)},jo=Object.create?function(n,o,s,i){i===void 0&&(i=s);var a=Object.getOwnPropertyDescriptor(o,s);(!a||("get"in a?!o.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(n,i,a)}:function(n,o,s,i){i===void 0&&(i=s),n[i]=o[s]},Lo=function(n){var o=typeof Symbol=="function"&&Symbol.iterator,s=o&&n[o],i=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},wa=function(n,o){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var i=s.call(n),a,c=[],u;try{for(;(o===void 0||o-- >0)&&!(a=i.next()).done;)c.push(a.value)}catch(f){u={error:f}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(u)throw u.error}}return c},ay=function(){for(var n=[],o=0;o<arguments.length;o++)n=n.concat(wa(arguments[o]));return n},cy=function(){for(var n=0,o=0,s=arguments.length;o<s;o++)n+=arguments[o].length;for(var i=Array(n),a=0,o=0;o<s;o++)for(var c=arguments[o],u=0,f=c.length;u<f;u++,a++)i[a]=c[u];return i},uy=function(n,o,s){if(s||arguments.length===2)for(var i=0,a=o.length,c;i<a;i++)(c||!(i in o))&&(c||(c=Array.prototype.slice.call(o,0,i)),c[i]=o[i]);return n.concat(c||Array.prototype.slice.call(o))},gr=function(n){return this instanceof gr?(this.v=n,this):new gr(n)},fy=function(n,o,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(n,o||[]),a,c=[];return a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a;function u(d){i[d]&&(a[d]=function(b){return new Promise(function(D,A){c.push([d,b,D,A])>1||f(d,b)})})}function f(d,b){try{l(i[d](b))}catch(D){h(c[0][3],D)}}function l(d){d.value instanceof gr?Promise.resolve(d.value.v).then(y,w):h(c[0][2],d)}function y(d){f("next",d)}function w(d){f("throw",d)}function h(d,b){d(b),c.shift(),c.length&&f(c[0][0],c[0][1])}},ly=function(n){var o,s;return o={},i("next"),i("throw",function(a){throw a}),i("return"),o[Symbol.iterator]=function(){return this},o;function i(a,c){o[a]=n[a]?function(u){return(s=!s)?{value:gr(n[a](u)),done:a==="return"}:c?c(u):u}:c}},dy=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n[Symbol.asyncIterator],s;return o?o.call(n):(n=typeof Lo=="function"?Lo(n):n[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(c){s[c]=n[c]&&function(u){return new Promise(function(f,l){u=n[c](u),a(f,l,u.done,u.value)})}}function a(c,u,f,l){Promise.resolve(l).then(function(y){c({value:y,done:f})},u)}},py=function(n,o){return Object.defineProperty?Object.defineProperty(n,"raw",{value:o}):n.raw=o,n};var r=Object.create?function(n,o){Object.defineProperty(n,"default",{enumerable:!0,value:o})}:function(n,o){n.default=o};hy=function(n){if(n&&n.__esModule)return n;var o={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&jo(o,n,s);return r(o,n),o},my=function(n){return n&&n.__esModule?n:{default:n}},yy=function(n,o,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?n!==o||!i:!o.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(n):i?i.value:o.get(n)},gy=function(n,o,s,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof o=="function"?n!==o||!a:!o.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(n,s):a?a.value=s:o.set(n,s),s},wy=function(n,o){if(o===null||typeof o!="object"&&typeof o!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?o===n:n.has(o)},t("__extends",Ym),t("__assign",Zm),t("__rest",ey),t("__decorate",ty),t("__param",ry),t("__metadata",ny),t("__awaiter",oy),t("__generator",sy),t("__exportStar",iy),t("__createBinding",jo),t("__values",Lo),t("__read",wa),t("__spread",ay),t("__spreadArrays",cy),t("__spreadArray",uy),t("__await",gr),t("__asyncGenerator",fy),t("__asyncDelegator",ly),t("__asyncValues",dy),t("__makeTemplateObject",py),t("__importStar",hy),t("__importDefault",my),t("__classPrivateFieldGet",yy),t("__classPrivateFieldSet",gy),t("__classPrivateFieldIn",wy)})});var Oy=S((vN,Py)=>{"use strict";Py.exports=function(){return Date.now()}});var Iy=S((DN,ky)=>{"use strict";var qo=Oy(),ba=class{constructor(e,r,n){let o=this;this._started=qo(),this._rescheduled=0,this._scheduled=r,this._args=n,this._triggered=!1,this._timerWrapper=()=>{o._rescheduled>0?(o._scheduled=o._rescheduled-(qo()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,e.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=qo();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=qo(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function dD(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new ba(arguments[0],arguments[1],t)}ky.exports=dD});var By=S((EN,Ry)=>{"use strict";var{AbortController:pD}=globalThis,Ny=Iy(),cn=class extends pD{constructor(e){super(),this._ms=e,this._timer=Ny(()=>this.abort(),e),Object.setPrototypeOf(this,cn.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=Ny(()=>this.abort(),this._ms)}};Ry.exports={TimeoutController:cn}});var DD={};K(DD,{create:()=>vD});var tg=t=>Promise.reject(new Error(`No base found for "${t}"`)),fn=class{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||tg;for(let r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];let r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};var rg=t=>Promise.reject(new Error(`No codec found for "${t}"`)),ln=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||rg;for(let r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];let n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var ng=t=>Promise.reject(new Error(`No hasher found for "${t}"`)),dn=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||ng;for(let r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];let n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};var rs={};K(rs,{code:()=>ew,createLink:()=>Va,createNode:()=>Ha,decode:()=>rw,encode:()=>tw,name:()=>Zg,prepare:()=>es,validate:()=>ts});var og=Ca,Sa=128,sg=127,ig=~sg,ag=Math.pow(2,31);function Ca(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ag;)e[r++]=t&255|Sa,t/=128;for(;t&ig;)e[r++]=t&255|Sa,t>>>=7;return e[r]=t|0,Ca.bytes=r-n+1,e}var cg=Vo,ug=128,Ta=127;function Vo(t,n){var r=0,n=n||0,o=0,s=n,i,a=t.length;do{if(s>=a)throw Vo.bytes=0,new RangeError("Could not decode varint");i=t[s++],r+=o<28?(i&Ta)<<o:(i&Ta)*Math.pow(2,o),o+=7}while(i>=ug);return Vo.bytes=s-n,r}var fg=Math.pow(2,7),lg=Math.pow(2,14),dg=Math.pow(2,21),pg=Math.pow(2,28),hg=Math.pow(2,35),mg=Math.pow(2,42),yg=Math.pow(2,49),gg=Math.pow(2,56),wg=Math.pow(2,63),bg=function(t){return t<fg?1:t<lg?2:t<dg?3:t<pg?4:t<hg?5:t<mg?6:t<yg?7:t<gg?8:t<wg?9:10},vg={encode:og,decode:cg,encodingLength:bg},Dg=vg,Dr=Dg;var Er=(t,e=0)=>[Dr.decode(t,e),Dr.decode.bytes],Bt=(t,e,r=0)=>(Dr.encode(t,e,r),e),Ut=t=>Dr.encodingLength(t);var _D=new Uint8Array(0);var Aa=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Oe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var _a=t=>new TextEncoder().encode(t),Pa=t=>new TextDecoder().decode(t);var ft=(t,e)=>{let r=e.byteLength,n=Ut(t),o=n+Ut(r),s=new Uint8Array(o+r);return Bt(t,s,0),Bt(r,s,n),s.set(e,o),new Ft(t,r,e,s)},Et=t=>{let e=Oe(t),[r,n]=Er(e),[o,s]=Er(e.subarray(n)),i=e.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Ft(r,o,i,e)},ka=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Aa(t.bytes,e.bytes),Ft=class{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}};var Ko={};K(Ko,{base58btc:()=>Q,base58flickr:()=>Ag});function Eg(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var d=0,b=0,D=0,A=h.length;D!==A&&h[D]===0;)D++,d++;for(var F=(A-D)*f+1>>>0,j=new Uint8Array(F);D!==A;){for(var fe=h[D],ce=0,ee=F-1;(fe!==0||ce<b)&&ee!==-1;ee--,ce++)fe+=256*j[ee]>>>0,j[ee]=fe%a>>>0,fe=fe/a>>>0;if(fe!==0)throw new Error("Non-zero carry");b=ce,D++}for(var ae=F-b;ae!==F&&j[ae]===0;)ae++;for(var Me=c.repeat(d);ae<F;++ae)Me+=t.charAt(j[ae]);return Me}function y(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var d=0;if(h[d]!==" "){for(var b=0,D=0;h[d]===c;)b++,d++;for(var A=(h.length-d)*u+1>>>0,F=new Uint8Array(A);h[d];){var j=r[h.charCodeAt(d)];if(j===255)return;for(var fe=0,ce=A-1;(j!==0||fe<D)&&ce!==-1;ce--,fe++)j+=a*F[ce]>>>0,F[ce]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");D=fe,d++}if(h[d]!==" "){for(var ee=A-D;ee!==A&&F[ee]===0;)ee++;for(var ae=new Uint8Array(b+(A-ee)),Me=b;ee!==A;)ae[Me++]=F[ee++];return ae}}}function w(h){var d=y(h);if(d)return d;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:y,decode:w}}var xg=Eg,Sg=xg,Ia=Sg;var Jo=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Go=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Na(this,e)}},Wo=class{constructor(e){this.decoders=e}or(e){return Na(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Na=(t,e)=>new Wo({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Xo=class{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Jo(e,r,n),this.decoder=new Go(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Lt=({name:t,prefix:e,encode:r,decode:n})=>new Xo(t,e,r,n),lt=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:o}=Ia(r,e);return Lt({prefix:t,name:e,encode:n,decode:s=>Oe(o(s))})},Tg=(t,e,r,n)=>{let o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=o[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i},Cg=(t,e,r)=>{let n=e[e.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],i+=8;i>r;)i-=r,s+=e[o&a>>i];if(i&&(s+=e[o&a<<r-i]),n)for(;s.length*r&7;)s+="=";return s},$=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Lt({prefix:e,name:t,encode(o){return Cg(o,n,r)},decode(o){return Tg(o,n,r,t)}});var Q=lt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ag=lt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Qo={};K(Qo,{base32:()=>ke,base32hex:()=>kg,base32hexpad:()=>Ng,base32hexpadupper:()=>Rg,base32hexupper:()=>Ig,base32pad:()=>Pg,base32padupper:()=>Og,base32upper:()=>_g,base32z:()=>Bg});var ke=$({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_g=$({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pg=$({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Og=$({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kg=$({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ig=$({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ng=$({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rg=$({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bg=$({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var v=class{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:mn,byteLength:mn,code:hn,version:hn,multihash:hn,bytes:hn,_baseCache:mn,asCID:mn})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==xr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==jg)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return v.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=ft(e,r);return v.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ka(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return Fg(r,o,e||Q.encoder);default:return Lg(r,o,e||ke.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return $g(/^0\.0/,qg),!!(e&&(e[Ba]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof v)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:o,bytes:s}=e;return new v(r,n,o,s||Ra(r,n,o.bytes))}else if(e!=null&&e[Ba]===!0){let{version:r,multihash:n,code:o}=e,s=Et(n);return v.create(r,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==xr)throw new Error(`Version 0 CID must use dag-pb (code: ${xr}) block encoding`);return new v(e,r,n,n.bytes)}case 1:{let o=Ra(e,r,n.bytes);return new v(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return v.create(0,xr,e)}static createV1(e,r){return v.create(1,e,r)}static decode(e){let[r,n]=v.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=v.inspectBytes(e),n=r.size-r.multihashSize,o=Oe(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new Ft(r.multihashCode,r.digestSize,s,o);return[r.version===0?v.createV0(i):v.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,y]=Er(e.subarray(r));return r+=y,l},o=n(),s=xr;if(o===18?(o=0,r=0):o===1&&(s=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,f=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,o]=Ug(e,r),s=v.decode(o);return s._baseCache.set(n,e),s}},Ug=(t,e)=>{switch(t[0]){case"Q":{let r=e||Q;return[Q.prefix,r.decode(`${Q.prefix}${t}`)]}case Q.prefix:{let r=e||Q;return[Q.prefix,r.decode(t)]}case ke.prefix:{let r=e||ke;return[ke.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Fg=(t,e,r)=>{let{prefix:n}=r;if(n!==Q.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return o},Lg=(t,e,r)=>{let{prefix:n}=r,o=e.get(n);if(o==null){let s=r.encode(t);return e.set(n,s),s}else return o},xr=112,jg=18,Ra=(t,e,r)=>{let n=Ut(t),o=n+Ut(e),s=new Uint8Array(o+r.byteLength);return Bt(t,s,0),Bt(e,s,n),s.set(r,o),s},Ba=Symbol.for("@ipld/js-cid/CID"),hn={writable:!1,configurable:!1,enumerable:!0},mn={writable:!1,enumerable:!1,configurable:!1},Mg="0.0.0-dev",$g=(t,e)=>{if(t.test(Mg))console.warn(e);else throw new Error(e)},qg=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var zg=new TextDecoder;function Yo(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let o=t[e++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,e]}function yn(t,e){let r;[r,e]=Yo(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Ua(t,e){let r;return[r,e]=Yo(t,e),[r&7,r>>3,e]}function Hg(t){let e={},r=t.length,n=0;for(;n<r;){let o,s;if([o,s,n]=Ua(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=yn(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=yn(t,n),e.Name=zg.decode(i)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=Yo(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Fa(t){let e=t.length,r=0,n,o=!1,s;for(;r<e;){let a,c;if([a,c,r]=Ua(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=yn(t,r),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=yn(t,r),n.push(Hg(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var ja=new TextEncoder,La=2**32,Vg=2**31;function Jg(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=Sr(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let n=ja.encode(t.Name);r-=n.length,e.set(n,r),r=Sr(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=Sr(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function Ma(t){let e=Wg(t),r=new Uint8Array(e),n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=Sr(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){let s=Jg(t.Links[o],r.subarray(0,n));n-=s,n=Sr(r,n,s)-1,r[n]=18}return r}function Gg(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+jt(r)}if(typeof t.Name=="string"){let r=ja.encode(t.Name).length;e+=1+r+jt(r)}return typeof t.Tsize=="number"&&(e+=1+jt(t.Tsize)),e}function Wg(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+jt(r)}if(t.Links)for(let r of t.Links){let n=Gg(r);e+=1+n+jt(n)}return e}function Sr(t,e,r){e-=jt(r);let n=e;for(;r>=Vg;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function jt(t){return t%2===0&&t++,Math.floor((Xg(t)+6)/7)}function Xg(t){let e=0;return t>=La&&(t=Math.floor(t/La),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+Kg[t]}var Kg=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var Qg=["Data","Links"],Yg=["Hash","Name","Tsize"],Zo=new TextEncoder;function qa(t,e){if(t===e)return 0;let r=t.Name?Zo.encode(t.Name):[],n=e.Name?Zo.encode(e.Name):[],o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function $a(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function za(t){if(typeof t.asCID=="object"){let r=v.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=v.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=v.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=v.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function es(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=Zo.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(za),e.Links.sort(qa);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function ts(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!$a(t,Qg))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!$a(r,Yg))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&qa(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Ha(t,e=[]){return es({Data:t,Links:e})}function Va(t,e,r){return za({Hash:r,Name:t,Tsize:e})}var Zg="dag-pb",ew=112;function tw(t){ts(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),Ma(e)}function rw(t){let e=Fa(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{let o={};try{o.Hash=v.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}var _n={};K(_n,{code:()=>Fw,decode:()=>ps,encode:()=>ds,name:()=>Uw});var nw=["string","number","bigint","symbol"],ow=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Ja(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(nw.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(sw(t))return"Buffer";let r=iw(t);return r||"Object"}function sw(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function iw(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(ow.includes(e))return e}var g=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};g.uint=new g(0,"uint",!0);g.negint=new g(1,"negint",!0);g.bytes=new g(2,"bytes",!0);g.string=new g(3,"string",!0);g.array=new g(4,"array",!1);g.map=new g(5,"map",!1);g.tag=new g(6,"tag",!1);g.float=new g(7,"float",!0);g.false=new g(7,"false",!0);g.true=new g(7,"true",!0);g.null=new g(7,"null",!0);g.undefined=new g(7,"undefined",!0);g.break=new g(7,"break",!0);var E=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Mt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",aw=new TextDecoder,cw=new TextEncoder;function gn(t){return Mt&&globalThis.Buffer.isBuffer(t)}function Tr(t){return t instanceof Uint8Array?gn(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Ka=Mt?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Wa(t,e,r):(t,e,r)=>r-e>64?aw.decode(t.subarray(e,r)):Wa(t,e,r),wn=Mt?t=>t.length>64?globalThis.Buffer.from(t):Ga(t):t=>t.length>64?cw.encode(t):Ga(t),$e=t=>Uint8Array.from(t),$t=Mt?(t,e,r)=>gn(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Qa=Mt?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Tr(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Ya=Mt?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Za(t,e){if(gn(t)&&gn(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function Ga(t,e=1/0){let r,n=t.length,o=null,s=[];for(let i=0;i<n;++i){if(r=t.charCodeAt(i),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(i+1===n){(e-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Wa(t,e,r){let n=[];for(;e<r;){let o=t[e],s=null,i=o>239?4:o>223?3:o>191?2:1;if(e+i<=r){let a,c,u,f;switch(i){case 1:o<128&&(s=o);break;case 2:a=t[e+1],(a&192)===128&&(f=(o&31)<<6|a&63,f>127&&(s=f));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(f=(o&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:a=t[e+1],c=t[e+2],u=t[e+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(f=(o&15)<<18|(a&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=i}return ns(n)}var Xa=4096;function ns(t){let e=t.length;if(e<=Xa)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Xa));return r}var uw=256,Cr=class{constructor(e=uw){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Ya(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=$t(n,0,this.cursor)}else r=Qa(this.chunks,this.cursor);return e&&this.reset(),r}};var T="CBOR decode error:",Ze="CBOR encode error:",Ar=[];Ar[23]=1;Ar[24]=2;Ar[25]=3;Ar[26]=5;Ar[27]=9;function et(t,e,r){if(t.length-e<r)throw new Error(`${T} not enough data for type`)}var Y=[24,256,65536,4294967296,BigInt("18446744073709551616")];function le(t,e,r){et(t,e,1);let n=t[e];if(r.strict===!0&&n<Y[0])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);return n}function de(t,e,r){et(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Y[1])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);return n}function pe(t,e,r){et(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Y[2])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);return n}function he(t,e,r){et(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<Y[3])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${T} integers outside of the safe integer range are not supported`)}function ec(t,e,r,n){return new E(g.uint,le(t,e+1,n),2)}function tc(t,e,r,n){return new E(g.uint,de(t,e+1,n),3)}function rc(t,e,r,n){return new E(g.uint,pe(t,e+1,n),5)}function nc(t,e,r,n){return new E(g.uint,he(t,e+1,n),9)}function be(t,e){return te(t,0,e.value)}function te(t,e,r){if(r<Y[0]){let n=Number(r);t.push([e|n])}else if(r<Y[1]){let n=Number(r);t.push([e|24,n])}else if(r<Y[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Y[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Y[4]){let o=[e|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,t.push(o)}else throw new Error(`${T} encountered BigInt larger than allowable range`)}}be.encodedSize=function(e){return te.encodedSize(e.value)};te.encodedSize=function(e){return e<Y[0]?1:e<Y[1]?2:e<Y[2]?3:e<Y[3]?5:9};be.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function oc(t,e,r,n){return new E(g.negint,-1-le(t,e+1,n),2)}function sc(t,e,r,n){return new E(g.negint,-1-de(t,e+1,n),3)}function ic(t,e,r,n){return new E(g.negint,-1-pe(t,e+1,n),5)}var os=BigInt(-1),ac=BigInt(1);function cc(t,e,r,n){let o=he(t,e+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new E(g.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${T} integers outside of the safe integer range are not supported`);return new E(g.negint,os-BigInt(o),9)}function bn(t,e){let r=e.value,n=typeof r=="bigint"?r*os-ac:r*-1-1;te(t,e.type.majorEncoded,n)}bn.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*os-ac:r*-1-1;return n<Y[0]?1:n<Y[1]?2:n<Y[2]?3:n<Y[3]?5:9};bn.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function _r(t,e,r,n){et(t,e,r+n);let o=$t(t,e+r,e+r+n);return new E(g.bytes,o,r+n)}function uc(t,e,r,n){return _r(t,e,1,r)}function fc(t,e,r,n){return _r(t,e,2,le(t,e+1,n))}function lc(t,e,r,n){return _r(t,e,3,de(t,e+1,n))}function dc(t,e,r,n){return _r(t,e,5,pe(t,e+1,n))}function pc(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${T} 64-bit integer bytes lengths not supported`);return _r(t,e,9,o)}function vn(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===g.string?wn(t.value):t.value),t.encodedBytes}function qt(t,e){let r=vn(e);te(t,e.type.majorEncoded,r.length),t.push(r)}qt.encodedSize=function(e){let r=vn(e);return te.encodedSize(r.length)+r.length};qt.compareTokens=function(e,r){return lw(vn(e),vn(r))};function lw(t,e){return t.length<e.length?-1:t.length>e.length?1:Za(t,e)}function Pr(t,e,r,n,o){let s=r+n;et(t,e,s);let i=new E(g.string,Ka(t,e+r,e+s),s);return o.retainStringBytes===!0&&(i.byteValue=$t(t,e+r,e+s)),i}function hc(t,e,r,n){return Pr(t,e,1,r,n)}function mc(t,e,r,n){return Pr(t,e,2,le(t,e+1,n),n)}function yc(t,e,r,n){return Pr(t,e,3,de(t,e+1,n),n)}function gc(t,e,r,n){return Pr(t,e,5,pe(t,e+1,n),n)}function wc(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${T} 64-bit integer string lengths not supported`);return Pr(t,e,9,o,n)}var bc=qt;function zt(t,e,r,n){return new E(g.array,n,r)}function vc(t,e,r,n){return zt(t,e,1,r)}function Dc(t,e,r,n){return zt(t,e,2,le(t,e+1,n))}function Ec(t,e,r,n){return zt(t,e,3,de(t,e+1,n))}function xc(t,e,r,n){return zt(t,e,5,pe(t,e+1,n))}function Sc(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${T} 64-bit integer array lengths not supported`);return zt(t,e,9,o)}function Tc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${T} indefinite length items not allowed`);return zt(t,e,1,1/0)}function Dn(t,e){te(t,g.array.majorEncoded,e.value)}Dn.compareTokens=be.compareTokens;Dn.encodedSize=function(e){return te.encodedSize(e.value)};function Ht(t,e,r,n){return new E(g.map,n,r)}function Cc(t,e,r,n){return Ht(t,e,1,r)}function Ac(t,e,r,n){return Ht(t,e,2,le(t,e+1,n))}function _c(t,e,r,n){return Ht(t,e,3,de(t,e+1,n))}function Pc(t,e,r,n){return Ht(t,e,5,pe(t,e+1,n))}function Oc(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${T} 64-bit integer map lengths not supported`);return Ht(t,e,9,o)}function kc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${T} indefinite length items not allowed`);return Ht(t,e,1,1/0)}function En(t,e){te(t,g.map.majorEncoded,e.value)}En.compareTokens=be.compareTokens;En.encodedSize=function(e){return te.encodedSize(e.value)};function Ic(t,e,r,n){return new E(g.tag,r,1)}function Nc(t,e,r,n){return new E(g.tag,le(t,e+1,n),2)}function Rc(t,e,r,n){return new E(g.tag,de(t,e+1,n),3)}function Bc(t,e,r,n){return new E(g.tag,pe(t,e+1,n),5)}function Uc(t,e,r,n){return new E(g.tag,he(t,e+1,n),9)}function xn(t,e){te(t,g.tag.majorEncoded,e.value)}xn.compareTokens=be.compareTokens;xn.encodedSize=function(e){return te.encodedSize(e.value)};var gw=20,ww=21,bw=22,vw=23;function Fc(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${T} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new E(g.null,null,1):new E(g.undefined,void 0,1)}function Lc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${T} indefinite length items not allowed`);return new E(g.break,void 0,1)}function ss(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${T} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${T} Infinity values are not supported`)}return new E(g.float,t,e)}function jc(t,e,r,n){return ss(is(t,e+1),3,n)}function Mc(t,e,r,n){return ss(as(t,e+1),5,n)}function $c(t,e,r,n){return ss(Vc(t,e+1),9,n)}function Sn(t,e,r){let n=e.value;if(n===!1)t.push([g.float.majorEncoded|gw]);else if(n===!0)t.push([g.float.majorEncoded|ww]);else if(n===null)t.push([g.float.majorEncoded|bw]);else if(n===void 0)t.push([g.float.majorEncoded|vw]);else{let o,s=!1;(!r||r.float64!==!0)&&(zc(n),o=is(Ie,1),n===o||Number.isNaN(n)?(Ie[0]=249,t.push(Ie.slice(0,3)),s=!0):(Hc(n),o=as(Ie,1),n===o&&(Ie[0]=250,t.push(Ie.slice(0,5)),s=!0))),s||(Dw(n),o=Vc(Ie,1),Ie[0]=251,t.push(Ie.slice(0,9)))}}Sn.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){zc(n);let o=is(Ie,1);if(n===o||Number.isNaN(n))return 3;if(Hc(n),o=as(Ie,1),n===o)return 5}return 9};var qc=new ArrayBuffer(9),ve=new DataView(qc,1),Ie=new Uint8Array(qc,0);function zc(t){if(t===1/0)ve.setUint16(0,31744,!1);else if(t===-1/0)ve.setUint16(0,64512,!1);else if(Number.isNaN(t))ve.setUint16(0,32256,!1);else{ve.setFloat32(0,t);let e=ve.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)ve.setUint16(0,31744,!1);else if(r===0)ve.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?ve.setUint16(0,0):o<-14?ve.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):ve.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function is(t,e){if(t.length-e<2)throw new Error(`${T} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function Hc(t){ve.setFloat32(0,t,!1)}function as(t,e){if(t.length-e<4)throw new Error(`${T} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Dw(t){ve.setFloat64(0,t,!1)}function Vc(t,e){if(t.length-e<8)throw new Error(`${T} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}Sn.compareTokens=be.compareTokens;function R(t,e,r){throw new Error(`${T} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Tn(t){return()=>{throw new Error(`${T} ${t}`)}}var x=[];for(let t=0;t<=23;t++)x[t]=R;x[24]=ec;x[25]=tc;x[26]=rc;x[27]=nc;x[28]=R;x[29]=R;x[30]=R;x[31]=R;for(let t=32;t<=55;t++)x[t]=R;x[56]=oc;x[57]=sc;x[58]=ic;x[59]=cc;x[60]=R;x[61]=R;x[62]=R;x[63]=R;for(let t=64;t<=87;t++)x[t]=uc;x[88]=fc;x[89]=lc;x[90]=dc;x[91]=pc;x[92]=R;x[93]=R;x[94]=R;x[95]=Tn("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)x[t]=hc;x[120]=mc;x[121]=yc;x[122]=gc;x[123]=wc;x[124]=R;x[125]=R;x[126]=R;x[127]=Tn("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)x[t]=vc;x[152]=Dc;x[153]=Ec;x[154]=xc;x[155]=Sc;x[156]=R;x[157]=R;x[158]=R;x[159]=Tc;for(let t=160;t<=183;t++)x[t]=Cc;x[184]=Ac;x[185]=_c;x[186]=Pc;x[187]=Oc;x[188]=R;x[189]=R;x[190]=R;x[191]=kc;for(let t=192;t<=215;t++)x[t]=Ic;x[216]=Nc;x[217]=Rc;x[218]=Bc;x[219]=Uc;x[220]=R;x[221]=R;x[222]=R;x[223]=R;for(let t=224;t<=243;t++)x[t]=Tn("simple values are not supported");x[244]=R;x[245]=R;x[246]=R;x[247]=Fc;x[248]=Tn("simple values are not supported");x[249]=jc;x[250]=Mc;x[251]=$c;x[252]=R;x[253]=R;x[254]=R;x[255]=Lc;var Ne=[];for(let t=0;t<24;t++)Ne[t]=new E(g.uint,t,1);for(let t=-1;t>=-24;t--)Ne[31-t]=new E(g.negint,t,1);Ne[64]=new E(g.bytes,new Uint8Array(0),1);Ne[96]=new E(g.string,"",1);Ne[128]=new E(g.array,0,1);Ne[160]=new E(g.map,0,1);Ne[244]=new E(g.false,!1,1);Ne[245]=new E(g.true,!0,1);Ne[246]=new E(g.null,null,1);function Jc(t){switch(t.type){case g.false:return $e([244]);case g.true:return $e([245]);case g.null:return $e([246]);case g.bytes:return t.value.length?void 0:$e([64]);case g.string:return t.value===""?$e([96]):void 0;case g.array:return t.value===0?$e([128]):void 0;case g.map:return t.value===0?$e([160]):void 0;case g.uint:return t.value<24?$e([Number(t.value)]):void 0;case g.negint:if(t.value>=-24)return $e([31-Number(t.value)])}}var xw={float64:!1,mapSorter:Cw,quickEncodeToken:Jc};function Sw(){let t=[];return t[g.uint.major]=be,t[g.negint.major]=bn,t[g.bytes.major]=qt,t[g.string.major]=bc,t[g.array.major]=Dn,t[g.map.major]=En,t[g.tag.major]=xn,t[g.float.major]=Sn,t}var Gc=Sw(),cs=new Cr,Vt=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Ze} object contains circular references`);return new Vt(r,e)}},dt={null:new E(g.null,null),undefined:new E(g.undefined,void 0),true:new E(g.true,!0),false:new E(g.false,!1),emptyArray:new E(g.array,0),emptyMap:new E(g.map,0)},pt={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new E(g.float,t):t>=0?new E(g.uint,t):new E(g.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new E(g.uint,t):new E(g.negint,t)},Uint8Array(t,e,r,n){return new E(g.bytes,t)},string(t,e,r,n){return new E(g.string,t)},boolean(t,e,r,n){return t?dt.true:dt.false},null(t,e,r,n){return dt.null},undefined(t,e,r,n){return dt.undefined},ArrayBuffer(t,e,r,n){return new E(g.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new E(g.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[dt.emptyArray,new E(g.break)]:dt.emptyArray;n=Vt.createCheck(n,t);let o=[],s=0;for(let i of t)o[s++]=Cn(i,r,n);return r.addBreakTokens?[new E(g.array,t.length),o,new E(g.break)]:[new E(g.array,t.length),o]},Object(t,e,r,n){let o=e!=="Object",s=o?t.keys():Object.keys(t),i=o?t.size:s.length;if(!i)return r.addBreakTokens===!0?[dt.emptyMap,new E(g.break)]:dt.emptyMap;n=Vt.createCheck(n,t);let a=[],c=0;for(let u of s)a[c++]=[Cn(u,r,n),Cn(o?t.get(u):t[u],r,n)];return Tw(a,r),r.addBreakTokens?[new E(g.map,i),a,new E(g.break)]:[new E(g.map,i),a]}};pt.Map=pt.Object;pt.Buffer=pt.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))pt[`${t}Array`]=pt.DataView;function Cn(t,e={},r){let n=Ja(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||pt[n];if(typeof o=="function"){let i=o(t,n,e,r);if(i!=null)return i}let s=pt[n];if(!s)throw new Error(`${Ze} unsupported type: ${n}`);return s(t,n,e,r)}function Tw(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Cw(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=Gc[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Wc(t,e,r,n){if(Array.isArray(e))for(let o of e)Wc(t,o,r,n);else r[e.type.major](t,e,n)}function us(t,e,r){let n=Cn(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=e[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,r),a=new Cr(i);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Tr(a.chunks[0])}}return cs.reset(),Wc(cs,n,e,r),cs.toBytes(!0)}function fs(t,e){return e=Object.assign({},xw,e),us(t,Gc,e)}var Aw={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},ls=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=Ne[e];if(r===void 0){let n=x[e];if(!n)throw new Error(`${T} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},Or=Symbol.for("DONE"),An=Symbol.for("BREAK");function _w(t,e,r){let n=[];for(let o=0;o<t.value;o++){let s=kr(e,r);if(s===An){if(t.value===1/0)break;throw new Error(`${T} got unexpected break to lengthed array`)}if(s===Or)throw new Error(`${T} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=s}return n}function Pw(t,e,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<t.value;i++){let a=kr(e,r);if(a===An){if(t.value===1/0)break;throw new Error(`${T} got unexpected break to lengthed map`)}if(a===Or)throw new Error(`${T} found map but not enough entries (got ${i} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${T} non-string keys not supported (got ${typeof a})`);let c=kr(e,r);if(c===Or)throw new Error(`${T} found map but not enough entries (got ${i} [no value], expected ${t.value})`);n?s.set(a,c):o[a]=c}return n?s:o}function kr(t,e){if(t.done())return Or;let r=t.next();if(r.type===g.break)return An;if(r.type.terminal)return r.value;if(r.type===g.array)return _w(r,t,e);if(r.type===g.map)return Pw(r,t,e);if(r.type===g.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=kr(t,e);return e.tags[r.value](n)}throw new Error(`${T} tag not supported (${r.value})`)}throw new Error("unsupported")}function Ir(t,e){if(!(t instanceof Uint8Array))throw new Error(`${T} data to decode must be a Uint8Array`);e=Object.assign({},Aw,e);let r=e.tokenizer||new ls(t,e),n=kr(r,e);if(n===Or)throw new Error(`${T} did not find any content to decode`);if(n===An)throw new Error(`${T} got unexpected break`);if(!r.done())throw new Error(`${T} too many terminals, data makes no sense`);return n}var Xc=42;function kw(t){if(t.asCID!==t)return null;let e=v.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new E(g.tag,Xc),new E(g.bytes,r)]}function Iw(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Nw(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Rw={float64:!0,typeEncoders:{Object:kw,undefined:Iw,number:Nw}};function Bw(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return v.decode(t.subarray(1))}var Kc={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Kc.tags[Xc]=Bw;var Uw="dag-cbor",Fw=113,ds=t=>fs(t,Rw),ps=t=>Ir(t,Kc);var Es={};K(Es,{code:()=>Ww,decode:()=>Kw,encode:()=>Xw,name:()=>Gw});var ms=({name:t,code:e,encode:r})=>new hs(t,e,r),hs=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?ft(this.code,r):r.then(n=>ft(this.code,n))}else throw Error("Unknown type, must be binary type")}};var ys={};K(ys,{base64:()=>Jt,base64pad:()=>Lw,base64url:()=>ht,base64urlpad:()=>jw});var Jt=$({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Lw=$({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ht=$({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jw=$({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var gs=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===g.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===g.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[g.uint.major](e,r){this.prefix(e);let n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);e.push(o)}[g.negint.major](e,r){this[g.uint.major](e,r)}[g.bytes.major](e,r){throw new Error(`${Ze} unsupported type: Uint8Array`)}[g.string.major](e,r){this.prefix(e);let n=wn(JSON.stringify(r.value));e.push(n.length>32?Tr(n):n)}[g.array.major](e,r){this.prefix(e),this.inRecursive.push({type:g.array,elements:0}),e.push([91])}[g.map.major](e,r){this.prefix(e),this.inRecursive.push({type:g.map,elements:0}),e.push([123])}[g.tag.major](e,r){}[g.float.major](e,r){if(r.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===g.array)e.push([93]);else if(i.type===g.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${Ze} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}let n=String(r.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),e.push(o)}};function Mw(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${Ze} complex map keys are not supported`);let r=t[0],n=e[0];if(r.type!==g.string||n.type!==g.string)throw new Error(`${Ze} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${Ze} unexpected duplicate map keys, this is not supported`)}var $w={addBreakTokens:!0,mapSorter:Mw};function ws(t,e){return e=Object.assign({},$w,e),us(t,new gs,e)}var Gt=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${T} unexpected end of input at position ${this.pos}`);for(let r=0;r<e.length;r++)if(this.data[this.pos++]!==e[r])throw new Error(`${T} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this.pos,r=!1,n=!1,o=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new E(g.uint,0,this.pos-e);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===e+1)throw new Error(`${T} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${T} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),i=parseFloat(s);return n?new E(g.float,i,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new E(i>=0?g.uint:g.negint,i,this.pos-e):new E(i>=0?g.uint:g.negint,BigInt(s),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${T} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let s=this.pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this.pos,s));return this.pos=s+1,new E(g.string,c,i)}}let e=this.pos,r=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${T} unexpected end of unicode escape sequence at position ${this.pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${T} unexpected unicode escape character at position ${this.pos}`);s=s*16+a,this.pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${T} unexpected unicode sequence at position ${this.pos}`);let c,u,f,l;switch(a){case 1:s<128&&(i=s);break;case 2:c=this.data[this.pos+1],(c&192)===128&&(l=(s&31)<<6|c&63,l>127&&(i=l));break;case 3:c=this.data[this.pos+1],u=this.data[this.pos+2],(c&192)===128&&(u&192)===128&&(l=(s&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=this.data[this.pos+1],u=this.data[this.pos+2],f=this.data[this.pos+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(l=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,l>65535&&l<1114112&&(i=l))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this.pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${T} unexpected string termination at position ${this.pos}`);switch(i=this.ch(),this.pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${T} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new E(g.string,ns(r),this.pos-e);default:if(s<32)throw new Error(`${T} invalid control character at position ${this.pos}`);s<128?(r.push(s),this.pos++):o()}}throw new Error(`${T} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new E(g.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new E(g.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new E(g.null,null,4);case 102:return this.expect([102,97,108,115,101]),new E(g.false,!1,5);case 116:return this.expect([116,114,117,101]),new E(g.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${T} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new E(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${T} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new E(g.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new E(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${T} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new E(g.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${T} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${T} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function bs(t,e){return e=Object.assign({tokenizer:new Gt(t,e)},e),Ir(t,e)}function zw(t){if(t.asCID!==t)return null;let e=v.asCID(t);if(!e)return null;let r=e.toString();return[new E(g.map,1/0,1),new E(g.string,"/",1),new E(g.string,r,r.length),new E(g.break,void 0,1)]}function Yc(t){let e=Jt.encode(t).slice(1);return[new E(g.map,1/0,1),new E(g.string,"/",1),new E(g.map,1/0,1),new E(g.string,"bytes",5),new E(g.string,e,e.length),new E(g.break,void 0,1),new E(g.break,void 0,1)]}function Hw(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Vw(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Jw={typeEncoders:{Object:zw,Uint8Array:Yc,Buffer:Yc,undefined:Hw,number:Vw}},vs=class extends Gt{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===g.map){let r=this._next();if(r.type===g.string&&r.value==="/"){let n=this._next();if(n.type===g.string){if(this._next().type!==g.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new E(g.tag,42,0)}if(n.type===g.map){let o=this._next();if(o.type===g.string&&o.value==="bytes"){let s=this._next();if(s.type===g.string){for(let a=0;a<2;a++)if(this._next().type!==g.break)throw new Error("Invalid encoded Bytes form");let i=Jt.decode(`m${s.value}`);return new E(g.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}},Ds={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Ds.tags[42]=v.parse;var Gw="dag-json",Ww=297,Xw=t=>ws(t,Jw),Kw=t=>{let e=Object.assign(Ds,{tokenizer:new vs(t,Ds)});return bs(t,e)};var xs={};K(xs,{code:()=>ob,decode:()=>cb,encode:()=>ab,name:()=>nb,toGeneral:()=>au});function Re(t){return ht.encode(t).slice(1)}function De(t){return ht.decode(`u${t}`)}function Zc(t){let[e,r,n]=t;return{payload:r,signatures:[{protected:e,signature:n}],link:v.decode(De(r))}}function Qw(t){let e={signature:De(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=De(t.protected)),e}function eu(t){let e=De(t.payload);try{v.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:t.signatures.map(Qw)}}function Yw(t){let e={signature:Re(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=Re(t.protected)),e}function tu(t){let e={payload:Re(t.payload),signatures:t.signatures.map(Yw)};return e.link=v.decode(new Uint8Array(t.payload)),e}function ru(t){let[e,r,n,o,s]=t,i={ciphertext:o,iv:n,protected:e,tag:s};return r&&(i.recipients=[{encrypted_key:r}]),i}function eb(t){let e={};return t.encrypted_key&&(e.encrypted_key=De(t.encrypted_key)),t.header&&(e.header=t.header),e}function nu(t){let e={ciphertext:De(t.ciphertext),protected:De(t.protected),iv:De(t.iv),tag:De(t.tag)};return t.aad&&(e.aad=De(t.aad)),t.recipients&&(e.recipients=t.recipients.map(eb)),t.unprotected&&(e.unprotected=t.unprotected),e}function tb(t){let e={};return t.encrypted_key&&(e.encrypted_key=Re(t.encrypted_key)),t.header&&(e.header=t.header),e}function ou(t){let e={ciphertext:Re(t.ciphertext),protected:Re(t.protected),iv:Re(t.iv),tag:Re(t.tag)};return t.aad&&(e.aad=Re(t.aad)),t.recipients&&(e.recipients=t.recipients.map(tb)),t.unprotected&&(e.unprotected=t.unprotected),e}var nb="dag-jose",ob=133;function su(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function sb(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function ib(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function iu(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function au(t){if(typeof t=="string"){let e=t.split(".");if(e.length===3)return Zc(e);if(e.length===5)return ru(e);throw new Error("Not a valid JOSE string")}if(su(t)||iu(t))return t;throw new Error("Not a valid unencoded JOSE object")}function ab(t){typeof t=="string"&&(t=au(t));let e;if(su(t))e=eu(t);else if(iu(t))e=nu(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(ds(e))}function cb(t){let e;try{e=ps(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(sb(e))return tu(e);if(ib(e))return ou(e);throw new Error("Not a valid DAG-JOSE object")}var Ss={};K(Ss,{identity:()=>Tt});var cu=0,ub="identity",uu=Oe,fb=t=>ft(cu,uu(t)),Tt={code:cu,name:ub,encode:uu,digest:fb};var Ts={};K(Ts,{identity:()=>lb});var lb=Lt({prefix:"\0",name:"identity",encode:t=>Pa(t),decode:t=>_a(t)});var Cs={};K(Cs,{base2:()=>db});var db=$({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var As={};K(As,{base8:()=>pb});var pb=$({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _s={};K(_s,{base10:()=>hb});var hb=lt({prefix:"9",name:"base10",alphabet:"0123456789"});var Ps={};K(Ps,{base16:()=>mb,base16upper:()=>yb});var mb=$({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yb=$({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Os={};K(Os,{base36:()=>gb,base36upper:()=>wb});var gb=lt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wb=lt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ks={};K(ks,{base256emoji:()=>xb});var fu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),bb=fu.reduce((t,e,r)=>(t[r]=e,t),[]),vb=fu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Db(t){return t.reduce((e,r)=>(e+=bb[r],e),"")}function Eb(t){let e=[];for(let r of t){let n=vb[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var xb=Lt({prefix:"\u{1F680}",name:"base256emoji",encode:Db,decode:Eb});var Is={};K(Is,{sha256:()=>Pn,sha512:()=>Sb});var lu=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Pn=ms({name:"sha2-256",code:18,encode:lu("SHA-256")}),Sb=ms({name:"sha2-512",code:19,encode:lu("SHA-512")});var Ns={};K(Ns,{code:()=>Cb,decode:()=>_b,encode:()=>Ab,name:()=>Tb});var Tb="raw",Cb=85,Ab=t=>Oe(t),_b=t=>Oe(t);var Rs={};K(Rs,{code:()=>Ib,decode:()=>Rb,encode:()=>Nb,name:()=>kb});var Pb=new TextEncoder,Ob=new TextDecoder,kb="json",Ib=512,Nb=t=>Pb.encode(JSON.stringify(t)),Rb=t=>JSON.parse(Ob.decode(t));var qe={...Ts,...Cs,...As,..._s,...Ps,...Qo,...Os,...Ko,...ys,...ks},du={...Is,...Ss},pu={raw:Ns,json:Rs};var hu="[a-fA-F\\d:]",mt=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${hu})|(?<=${hu})(?=\\s|$))`:"",Be="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",V="[a-fA-F\\d]{1,4}",On=`
(?:
(?:${V}:){7}(?:${V}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${V}:){6}(?:${Be}|:${V}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${V}:){5}(?::${Be}|(?::${V}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${V}:){4}(?:(?::${V}){0,1}:${Be}|(?::${V}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${V}:){3}(?:(?::${V}){0,2}:${Be}|(?::${V}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${V}:){2}(?:(?::${V}){0,3}:${Be}|(?::${V}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${V}:){1}(?:(?::${V}){0,4}:${Be}|(?::${V}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${V}){0,5}:${Be}|(?::${V}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Bb=new RegExp(`(?:^${Be}$)|(?:^${On}$)`),Ub=new RegExp(`^${Be}$`),Fb=new RegExp(`^${On}$`),Bs=t=>t&&t.exact?Bb:new RegExp(`(?:${mt(t)}${Be}${mt(t)})|(?:${mt(t)}${On}${mt(t)})`,"g");Bs.v4=t=>t&&t.exact?Ub:new RegExp(`${mt(t)}${Be}${mt(t)}`,"g");Bs.v6=t=>t&&t.exact?Fb:new RegExp(`${mt(t)}${On}${mt(t)}`,"g");var kn=Bs;function Us(t){let e=(...r)=>t(...r);return Object.defineProperty(e,"name",{value:`functionTimeout(${t.name||"<anonymous>"})`,configurable:!0}),e}function mu(){return!1}var{toString:Lb}=Object.prototype;function Fs(t){return Lb.call(t)==="[object RegExp]"}var yu={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function Ls(t,e={}){if(!Fs(t))throw new TypeError("Expected a RegExp instance");let r=Object.keys(yu).map(o=>(typeof e[o]=="boolean"?e[o]:t[o])?yu[o]:"").join(""),n=new RegExp(e.source||t.source,r);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:t.lastIndex,n}function In(t,e,{timeout:r}={}){try{return Us(()=>Ls(t).test(e),{timeout:r})()}catch(n){if(mu(n))return!1;throw n}}var jb=15,gu=45,js={timeout:400};function Nn(t){return In(kn({exact:!0}),t.slice(0,gu),js)}function wu(t){return In(kn.v6({exact:!0}),t.slice(0,gu),js)}function bu(t){return In(kn.v4({exact:!0}),t.slice(0,jb),js)}function Rn(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Du(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var vu=Du("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Ms=Du("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Rn(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Mb={utf8:vu,"utf-8":vu,hex:qe.base16,latin1:Ms,ascii:Ms,binary:Ms,...qe},Bn=Mb;function M(t,e="utf8"){let r=Bn[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Eu=bu,$b=wu,$s=function(t){let e=0;if(t=t.toString().trim(),Eu(t)){let r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if($b(t)){let r=t.split(":",8),n;for(n=0;n<r.length;n++){let s=Eu(r[n]),i;s&&(i=$s(r[n]),r[n]=M(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,M(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(e+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);o[e++]=s>>8&255,o[e++]=s&255}return o}throw new Error("invalid ip address")},xu=function(t,e=0,r){e=~~e,r=r??t.length-e;let n=new DataView(t.buffer);if(r===4){let o=[];for(let s=0;s<r;s++)o.push(t[e+s]);return o.join(".")}if(r===16){let o=[];for(let s=0;s<r;s+=2)o.push(n.getUint16(e+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Nr={},qs={},zb=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];zb.forEach(t=>{let e=Hb(...t);qs[e.code]=e,Nr[e.name]=e});function Hb(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(o)}}function J(t){if(typeof t=="number"){if(qs[t]!=null)return qs[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Nr[t]!=null)return Nr[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var ze=_(Un(),1);function me(t,e="utf8"){let r=Bn[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function tt(t,e){e||(e=t.reduce((o,s)=>o+s.length,0));let r=Rn(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}function Bu(t,e){switch(J(t).code){case 4:case 41:return s0(e);case 6:case 273:case 33:case 132:return Fu(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return a0(e);case 421:return l0(e);case 444:return Ru(e);case 445:return Ru(e);case 466:return f0(e);default:return M(e,"base16")}}function Uu(t,e){switch(J(t).code){case 4:return Nu(e);case 41:return Nu(e);case 6:case 273:case 33:case 132:return Js(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return i0(e);case 421:return c0(e);case 444:return d0(e);case 445:return p0(e);case 466:return u0(e);default:return me(e,"base16")}}var Vs=Object.values(qe).map(t=>t.decoder),o0=function(){let t=Vs[0].or(Vs[1]);return Vs.slice(2).forEach(e=>t=t.or(e)),t}();function Nu(t){if(!Nn(t))throw new Error("invalid ip address");return $s(t)}function s0(t){let e=xu(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Nn(e))throw new Error("invalid ip address");return e}function Js(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Fu(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function i0(t){let e=me(t),r=Uint8Array.from(ze.default.encode(e.length));return tt([r,e],r.length+e.length)}function a0(t){let e=ze.default.decode(t);if(t=t.slice(ze.default.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return M(t)}function c0(t){let e;t[0]==="Q"||t[0]==="1"?e=Et(Q.decode(`z${t}`)).bytes:e=v.parse(t).multihash.bytes;let r=Uint8Array.from(ze.default.encode(e.length));return tt([r,e],r.length+e.length)}function u0(t){let e=o0.decode(t),r=Uint8Array.from(ze.default.encode(e.length));return tt([r,e],r.length+e.length)}function f0(t){let e=ze.default.decode(t),r=t.slice(ze.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+M(r,"base64url")}function l0(t){let e=ze.default.decode(t),r=t.slice(ze.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return M(r,"base58btc")}function d0(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let r=ke.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Js(n);return tt([r,o],r.length+o.length)}function p0(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let r=ke.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Js(n);return tt([r,o],r.length+o.length)}function Ru(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=M(e,"base32"),o=Fu(r);return`${n}:${o}`}var Wt=_(Un(),1);function h0(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let o=r[n],s=J(o);if(s.size===0){e.push([o]);continue}if(n++,n>=r.length)throw ju("invalid address: "+t);if(s.path===!0){e.push([o,Qs(r.slice(n).join("/"))]);break}e.push([o,r[n]])}return e}function m0(t){let e=[];return t.map(r=>{let n=Ln(r);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),Qs(e.join("/"))}function y0(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=Ln(e);return e.length>1?[r.code,Uu(r.code,e[1])]:[r.code]})}function Gs(t){return t.map(e=>{let r=Ln(e);return e[1]!=null?[r.code,Bu(r.code,e[1])]:[r.code]})}function Ws(t){return Fn(tt(t.map(e=>{let r=Ln(e),n=Uint8Array.from(Wt.default.encode(r.code));return e.length>1&&e[1]!=null&&(n=tt([n,e[1]])),n})))}function Xs(t,e){return t.size>0?t.size/8:t.size===0?0:Wt.default.decode(e)+Wt.default.decode.bytes}function Rr(t){let e=[],r=0;for(;r<t.length;){let n=Wt.default.decode(t,r),o=Wt.default.decode.bytes,s=J(n),i=Xs(s,t.slice(r+o));if(i===0){e.push([n]),r+=o;continue}let a=t.slice(r+o,r+o+i);if(r+=i+o,r>t.length)throw ju("Invalid address Uint8Array: "+M(t,"base16"));e.push([n,a])}return e}function Ks(t){let e=Rr(t),r=Gs(e);return m0(r)}function g0(t){t=Qs(t);let e=h0(t),r=y0(e);return Ws(r)}function Lu(t){return g0(t)}function Fn(t){let e=w0(t);if(e!=null)throw e;return Uint8Array.from(t)}function w0(t){try{Rr(t)}catch(e){return e}}function Qs(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function ju(t){return new Error("Error parsing address: "+t)}function Ln(t){return J(t[0])}var Ys=_(Un(),1);var Hu=_(oe(),1);function Br(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var qu,D0=Symbol.for("nodejs.util.inspect.custom"),zu=[J("dns").code,J("dns4").code,J("dns6").code,J("dnsaddr").code],E0=[J("p2p").code,J("ipfs").code],x0=new Map,Vu=Symbol.for("@multiformats/js-multiaddr/multiaddr");function jn(t){return Boolean(t?.[Vu])}var rt=class{constructor(e){if(this[qu]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=Fn(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Lu(e)}else if(jn(e))this.bytes=Fn(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Ks(this.bytes)}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),r=this.toString().split("/").slice(1),n,o;if(r.length>2)zu.includes(e[0])&&E0.includes(e[1])?(n=J("tcp").name,o=443):(n=J(r[2]).name,o=parseInt(r[3]));else if(zu.includes(e[0]))n=J("tcp").name,o=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:r[1],transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},J(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let o=Ys.default.decode(r,n),s=Ys.default.decode.bytes,i=J(o);n+=Xs(i,r.slice(n+s))+s,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Rr(this.bytes)}stringTuples(){let e=Rr(this.bytes);return Gs(e)}encapsulate(e){return e=new rt(e),new rt(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new rt(n.slice(0,o))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new rt(Ws(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Nr.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?M(Q.decode(`z${n}`),"base58btc"):M(v.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>J(r[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return Br(this.bytes,e.bytes)}async resolve(e){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=x0.get(r.name);if(n==null)throw(0,Hu.default)(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(s=>new rt(s))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(qu=Vu,D0)](){return this.inspect()}inspect(){return"<Multiaddr "+M(this.bytes,"base16")+" - "+Ks(this.bytes)+">"}};function U(t){return new rt(t)}var Ve=_(Xu(),1);var N0=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;O.nanosecond=O.ns=1/1e6;O.\u00B5s=O.\u03BCs=O.us=O.microsecond=1/1e3;O.millisecond=O.ms=O[""]=1;O.second=O.sec=O.s=O.ms*1e3;O.minute=O.min=O.m=O.s*60;O.hour=O.hr=O.h=O.m*60;O.day=O.d=O.h*24;O.week=O.wk=O.w=O.d*7;O.month=O.b=O.d*(365.25/12);O.year=O.yr=O.y=O.d*365.25;function O(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(N0,function(n,o,s){s=Ku(s),s&&(r=(r||0)+parseFloat(o,10)*s)}),r&&r/(Ku(e)||1)}function Ku(t){return O[t]||O[t.toLowerCase().replace(/s$/,"")]}var $n=O;var He=_(tf(),1);He.default.formatters.b=t=>t==null?"undefined":Q.baseEncode(t);He.default.formatters.t=t=>t==null?"undefined":ke.baseEncode(t);He.default.formatters.m=t=>t==null?"undefined":Jt.baseEncode(t);He.default.formatters.p=t=>t==null?"undefined":t.toString();He.default.formatters.c=t=>t==null?"undefined":t.toString();He.default.formatters.k=t=>t==null?"undefined":t.toString();function Hn(t){return Object.assign((0,He.default)(t),{error:(0,He.default)(`${t}:error`),trace:(0,He.default)(`${t}:trace`)})}var _t=_(Xn(),1);var kf=_(ai(),1),Kn=kf.default;var Qn=(t,e)=>e,Tv=(t,e,r,n)=>{if(n!=null&&n.assumeHttp===!1)return`tcp://${t}:${e}`;let o="tcp",s=`:${e}`;return r[r.length-1].protocol==="tcp"&&(o=e==="443"?"https":"http",s=e==="443"||e==="80"?"":s),`${o}://${t}${s}`},Cv={ip4:Qn,ip6:(t,e,r,n)=>n.length===1&&n[0].protocol==="ip6"?e:`[${e}]`,tcp:(t,e,r,n,o)=>n.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${t}:${e}`:Tv(t,e,n,o),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:Qn,dns4:Qn,dns6:Qn,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};function If(t,e){let r=U(t),n=r.toString().split("/").slice(1);return r.tuples().map(o=>({protocol:n.shift()??"",content:o[1]!=null?n.shift()??"":""})).reduce((o,s,i,a)=>{let c=Cv[s.protocol];if(c==null)throw new Error(`Unsupported protocol ${s.protocol}`);return c(o,s.content,i,a,e)},"")}function At(t){try{t=If(U(t))}catch{}return t=t.toString(),t}var Nf=()=>{};var Rf=Hn("ipfs-http-client:lib:error-handler"),Av=Kn.bind({ignoreUndefined:!0}),_v=Ve.isBrowser||Ve.isWebWorker?location.protocol:"http",Pv=Ve.isBrowser||Ve.isWebWorker?location.hostname:"localhost",Ov=Ve.isBrowser||Ve.isWebWorker?location.port:"5001",kv=(t={})=>{let e,r={},n;if(typeof t=="string"||jn(t))e=new URL(At(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||jn(t.url))e=new URL(At(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};let o=(r.protocol||_v).replace(":",""),s=(r.host||Pv).split(":")[0],i=r.port||Ov;e=new URL(`${o}://${s}:${i}`)}if(r.apiPath?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),Ve.isNode){let o=Nf(e);n=r.agent||new o({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n}},Iv=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){let n=await t.json();Rf(n),e=n.Message||n.message}else e=await t.text()}catch(n){Rf("Failed to parse error response",n),e=n.message}let r=new _t.default.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new _t.default.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new _t.default.TimeoutError)),e&&e.includes("request timed out")&&(r=new _t.default.TimeoutError),e&&(r.message=e),r},Nv=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Bf=t=>t.replace(Nv,function(e){return"-"+e.toLowerCase()}),Rv=t=>typeof t=="string"?$n(t):t,yt=class extends _t.default{constructor(e={}){let r=kv(e);super({timeout:Rv(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:Iv,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&s.append(Bf(i),a),i==="timeout"&&!isNaN(a)&&s.append(Bf(i),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,Av(s,{method:"POST"})))}},s2=_t.default.HTTPError;var p=t=>e=>t(new yt(e),e);function Yn(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}var Uf=_(oe(),1);function Zn(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,Uf.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function m({arg:t,searchParams:e,hashAlg:r,mtime:n,mode:o,...s}={}){e&&(s={...s,...e}),r&&(s.hash=r),n!=null&&(n=Zn(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=Yn(o)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);let i=new URLSearchParams(s);return t.forEach(a=>i.append("arg",a)),i}var Ff=p(t=>{async function e(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Keys||[]).map(o=>v.parse(o["/"]))}return e});var Lf=p(t=>{async function e(r,n={}){return((await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:m({...n,peer:r.toString()}),headers:n.headers})).json()).Keys||[]).map(s=>v.parse(s["/"]))}return e});var Bv=_(oe(),1);var jf=Symbol.for("@libp2p/peer-id");var Mf=Object.values(qe).map(t=>t.decoder).reduce((t,e)=>t.or(e),qe.identity.decoder),$f=114,qf=36,zf=37,jr=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[jf](){return!0}toString(){return this.string==null&&(this.string=Q.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return v.createV1($f,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Br(this.multihash.bytes,e);if(typeof e=="string")return q(e).equals(this);if(e?.multihash?.bytes!=null)return Br(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},Mr=class extends jr{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},$r=class extends jr{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},qr=class extends jr{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function q(t,e){if(e=e??Mf,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=Et(Q.decode(`z${t}`));return t.startsWith("12D")?new $r({multihash:r}):t.startsWith("16U")?new qr({multihash:r}):new Mr({multihash:r})}return Uv(Mf.decode(t))}function Uv(t){try{let e=Et(t);if(e.code===Tt.code){if(e.digest.length===qf)return new $r({multihash:e});if(e.digest.length===zf)return new qr({multihash:e})}if(e.code===Pn.code)return new Mr({multihash:e})}catch{return Fv(v.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function Fv(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==$f)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===Pn.code)return new Mr({multihash:t.multihash});if(e.code===Tt.code){if(e.digest.length===qf)return new $r({multihash:t.multihash});if(e.digest.length===zf)return new qr({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}var eo=p(t=>{async function e(r={}){let n=await t.post("bitswap/stat",{searchParams:m(r),signal:r.signal,headers:r.headers});return Lv(await n.json())}return e});function Lv(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map(e=>v.parse(e["/"])),peers:(t.Peers||[]).map(e=>q(e)),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}var Hf=p(t=>{async function e(r,n={}){return(await t.post("bitswap/unwant",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers})).json()}return e});function Vf(t){return{wantlist:Ff(t),wantlistForPeer:Lf(t),unwant:Hf(t),stat:eo(t)}}var to=p(t=>{async function e(r,n={}){let o=await t.post("block/get",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}return e});var Kf=_(oe(),1),Qf=_(zr(),1),Yf=_(tr(),1),Zf=_(di(),1);function Ee(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function ot(t){return t.constructor&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function Hr(t){return typeof t=="object"&&(t.path||t.content)}var st=t=>t&&typeof t.getReader=="function";async function el(t){if(Ee(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(ot(t))return t;if(st(t)&&(t=(0,Yf.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=(0,Qf.default)(t),{value:r,done:n}=await e.peek();if(n)return Xf(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await(0,Zf.default)(e))]);if(Ee(r)||typeof r=="string"||r instanceof String)return Xf(e)}throw(0,Kf.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function Xf(t){let e=[];for await(let r of t)e.push(r);return new Blob(e)}var Wr=_(oe(),1),Xl=_(tr(),1),Kl=_(zr(),1),Ii=_(pi(),1);var Wl=_(oe(),1);var it=_(Gl(),1),nr=it.default.Reader,Oi=it.default.Writer,P=it.default.util,re=it.default.roots["ipfs-unixfs"]||(it.default.roots["ipfs-unixfs"]={}),Yv=re.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=P.newBuffer([]),t.prototype.filesize=P.Long?P.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=P.emptyArray,t.prototype.hashType=P.Long?P.Long.fromBits(0,0,!0):0,t.prototype.fanout=P.Long?P.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,n){if(n||(n=Oi.create()),n.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&n.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&n.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var o=0;o<r.blocksizes.length;++o)n.uint32(32).uint64(r.blocksizes[o]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&n.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&n.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&n.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&re.UnixTime.encode(r.mtime,n.uint32(66).fork()).ldelim(),n},t.decode=function(r,n){r instanceof nr||(r=nr.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new re.Data;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(i&7)===2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=re.UnixTime.decode(r,r.uint32());break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Type"))throw P.ProtocolError("missing required 'Type'",{instance:s});return s},t.fromObject=function(r){if(r instanceof re.Data)return r;var n=new re.Data;switch(r.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?P.base64.decode(r.Data,n.Data=P.newBuffer(P.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),r.filesize!=null&&(P.Long?(n.filesize=P.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?n.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?n.filesize=r.filesize:typeof r.filesize=="object"&&(n.filesize=new P.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)P.Long?(n.blocksizes[o]=P.Long.fromValue(r.blocksizes[o])).unsigned=!0:typeof r.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(r.blocksizes[o],10):typeof r.blocksizes[o]=="number"?n.blocksizes[o]=r.blocksizes[o]:typeof r.blocksizes[o]=="object"&&(n.blocksizes[o]=new P.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0))}if(r.hashType!=null&&(P.Long?(n.hashType=P.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?n.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?n.hashType=r.hashType:typeof r.hashType=="object"&&(n.hashType=new P.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(P.Long?(n.fanout=P.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?n.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?n.fanout=r.fanout:typeof r.fanout=="object"&&(n.fanout=new P.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(n.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=re.UnixTime.fromObject(r.mtime)}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=P.newBuffer(o.Data))),P.Long){var s=new P.Long(0,0,!0);o.filesize=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.filesize=n.longs===String?"0":0;if(P.Long){var s=new P.Long(0,0,!0);o.hashType=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.hashType=n.longs===String?"0":0;if(P.Long){var s=new P.Long(0,0,!0);o.fanout=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(o.Type=n.enums===String?re.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(o.Data=n.bytes===String?P.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?o.filesize=n.longs===String?String(r.filesize):r.filesize:o.filesize=n.longs===String?P.Long.prototype.toString.call(r.filesize):n.longs===Number?new P.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){o.blocksizes=[];for(var i=0;i<r.blocksizes.length;++i)typeof r.blocksizes[i]=="number"?o.blocksizes[i]=n.longs===String?String(r.blocksizes[i]):r.blocksizes[i]:o.blocksizes[i]=n.longs===String?P.Long.prototype.toString.call(r.blocksizes[i]):n.longs===Number?new P.LongBits(r.blocksizes[i].low>>>0,r.blocksizes[i].high>>>0).toNumber(!0):r.blocksizes[i]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?o.hashType=n.longs===String?String(r.hashType):r.hashType:o.hashType=n.longs===String?P.Long.prototype.toString.call(r.hashType):n.longs===Number?new P.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?o.fanout=n.longs===String?String(r.fanout):r.fanout:o.fanout=n.longs===String?P.Long.prototype.toString.call(r.fanout):n.longs===Number?new P.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(o.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(o.mtime=re.UnixTime.toObject(r.mtime,n)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,it.default.util.toJSONOptions)},t.DataType=function(){let e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})(),g3=re.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Seconds=P.Long?P.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,n){return n||(n=Oi.create()),n.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&n.uint32(21).fixed32(r.FractionalNanoseconds),n},t.decode=function(r,n){r instanceof nr||(r=nr.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new re.UnixTime;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Seconds"))throw P.ProtocolError("missing required 'Seconds'",{instance:s});return s},t.fromObject=function(r){if(r instanceof re.UnixTime)return r;var n=new re.UnixTime;return r.Seconds!=null&&(P.Long?(n.Seconds=P.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?n.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?n.Seconds=r.Seconds:typeof r.Seconds=="object"&&(n.Seconds=new P.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=r.FractionalNanoseconds>>>0),n},t.toObject=function(r,n){n||(n={});var o={};if(n.defaults){if(P.Long){var s=new P.Long(0,0,!1);o.Seconds=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?o.Seconds=n.longs===String?String(r.Seconds):r.Seconds:o.Seconds=n.longs===String?P.Long.prototype.toString.call(r.Seconds):n.longs===Number?new P.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=r.FractionalNanoseconds),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,it.default.util.toJSONOptions)},t})(),w3=re.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.MimeType="",t.encode=function(r,n){return n||(n=Oi.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&n.uint32(10).string(r.MimeType),n},t.decode=function(r,n){r instanceof nr||(r=nr.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new re.Metadata;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(i&7);break}}return s},t.fromObject=function(r){if(r instanceof re.Metadata)return r;var n=new re.Metadata;return r.MimeType!=null&&(n.MimeType=String(r.MimeType)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(o.MimeType=r.MimeType),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,it.default.util.toJSONOptions)},t})();var b3=parseInt("0644",8),v3=parseInt("0755",8);function or(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function sr(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,Wl.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}async function*co(t,e){if(typeof t=="string"||t instanceof String||Ee(t)||ot(t)||t._readableState)throw(0,Wr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(st(t)&&(t=(0,Xl.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=(0,Kl.default)(t),{value:n,done:o}=await r.peek();if(o){yield*[];return}if(r.push(n),Number.isInteger(n))throw(0,Wr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*(0,Ii.default)(r,s=>ki({content:s},e));return}if(Ee(n)){yield ki({content:r},e);return}if(Hr(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||st(n)||ot(n)){yield*(0,Ii.default)(r,s=>ki(s,e));return}}throw Hr(t)?(0,Wr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,Wr.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function ki(t,e){let{path:r,mode:n,mtime:o,content:s}=t,i={path:r||"",mode:or(n),mtime:sr(o)};return s?i.content=await e(s):r||(i.content=await e(t)),i}function Ql(t){return co(t,el,!0)}function Yl(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function G(t,e,r={}){let n=[],o=new FormData,s=0,i=0;for await(let{content:a,path:c,mode:u,mtime:f}of Ql(t)){let l="",y=a?"file":"dir";s>0&&(l=`-${s}`);let w=y+l,h=[];if(u!=null&&h.push(`mode=${Yl(u)}`),f!=null){let{secs:d,nsecs:b}=f;h.push(`mtime=${d}`),b!=null&&h.push(`mtime-nsecs=${b}`)}if(h.length&&(w=`${w}?${h.join("&")}`),a){o.set(w,a,c!=null?encodeURIComponent(c):void 0);let d=i+a.size;n.push({name:c,start:i,end:d}),i=d}else if(c!=null)o.set(w,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:i,parts:n,headers:r,body:o}}var Zl=_(Wn(),1);function e1(t){return t.filter(Boolean)}function W(...t){return(0,Zl.anySignal)(e1(t))}var ed=p(t=>{async function e(r,n={}){let o=new AbortController,s=W(o.signal,n.signal),i;try{i=await(await t.post("block/put",{signal:s,searchParams:m(n),...await G([r],o,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return e(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return e(r,{...n,format:"cbor"});throw a}return v.parse(i.Key)}return e});var td=p(t=>{async function*e(r,n={}){Array.isArray(r)||(r=[r]);let o=await t.post("block/rm",{signal:n.signal,searchParams:m({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield t1(s)}return e});function t1(t){let e={cid:v.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}var rd=p(t=>{async function e(r,n={}){let s=await(await t.post("block/stat",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:v.parse(s.Key),size:s.Size}}return e});function nd(t){return{get:to(t),put:ed(t),rm:td(t),stat:rd(t)}}var od=p(t=>{async function e(r,n={}){let o=await t.post("bootstrap/add",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>U(i))}}return e});var sd=p(t=>{async function e(r={}){let n=await t.post("bootstrap/rm",{signal:r.signal,searchParams:m({...r,all:!0}),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>U(s))}}return e});var id=p(t=>{async function e(r={}){let n=await t.post("bootstrap/list",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>U(s))}}return e});var ad=p(t=>{async function e(r={}){let n=await t.post("bootstrap/add",{signal:r.signal,searchParams:m({...r,default:!0}),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>U(s))}}return e});var cd=p(t=>{async function e(r,n={}){let o=await t.post("bootstrap/rm",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>U(i))}}return e});function ud(t){return{add:od(t),clear:sd(t),list:id(t),reset:ad(t),rm:cd(t)}}var fd=p(t=>{async function e(r,n={}){let s=await(await t.post("config/profile/apply",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return e});function k(t){if(t==null)return t;let e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((n,o)=>(e.test(o)?n[o.toLowerCase()]=t[o]:e.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=t[o]:n[o]=t[o],n),r)}var ld=p(t=>{async function e(r={}){return(await(await t.post("config/profile/list",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).map(s=>k(s))}return e});function dd(t){return{apply:fd(t),list:ld(t)}}var pd=p(t=>async(r,n={})=>{if(!r)throw new Error("key argument is required");return(await(await t.post("config",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json()).Value});var hd=p(t=>async(r={})=>await(await t.post("config/show",{signal:r.signal,searchParams:m({...r}),headers:r.headers})).json());var md=p(t=>async(r,n={})=>{let o=new AbortController,s=W(o.signal,n.signal);await(await t.post("config/replace",{signal:s,searchParams:m(n),...await G([me(JSON.stringify(r))],o,n.headers)})).text()});var yd=p(t=>async(r,n,o={})=>{if(typeof r!="string")throw new Error("Invalid key type");let s={...o,...r1(r,n)};await(await t.post("config",{signal:o.signal,searchParams:m(s),headers:o.headers})).text()}),r1=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function gd(t){return{getAll:hd(t),get:pd(t),set:yd(t),replace:md(t),profiles:dd(t)}}var wd=p(t=>{async function*e(r,n={}){yield*(await t.post("dag/export",{signal:n.signal,searchParams:m({arg:r.toString()}),headers:n.headers})).iterator()}return e});var Ni=_(oe(),1);async function*Ri(t,e,r,n,o){let s=async u=>{let f=await r.getCodec(u.code),l=await n(u,o);return f.decode(l)},i=e.split("/").filter(Boolean),a=await s(t),c=t;for(;i.length;){let u=i.shift();if(!u)throw(0,Ni.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:i.join("/")};else throw(0,Ni.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let f=v.asCID(a);f&&(c=f,a=await s(a))}yield{value:a,remainderPath:""}}var Dd=_(uo(),1),Ed=_(Xr(),1),xd=_(oe(),1);var Sd=(t,e)=>p((n,o)=>{let s=to(o);return async(a,c={})=>{if(c.path){let w=c.localResolve?await(0,Dd.default)(Ri(a,c.path,t,s,c)):await(0,Ed.default)(Ri(a,c.path,t,s,c));if(!w)throw(0,xd.default)(new Error("Not found"),"ERR_NOT_FOUND");return w}let u=await t.getCodec(a.code),f=await s(a,c);return{value:u.decode(f),remainderPath:""}}})(e);var Td=p(t=>{async function*e(r,n={}){let o=new AbortController,s=W(o.signal,n.signal),{headers:i,body:a}=await G(r,o,n.headers),c=await t.post("dag/import",{signal:s,headers:i,body:a,searchParams:m({"pin-roots":n.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":f},PinErrorMsg:l}=u;yield{root:{cid:v.parse(f),pinErrorMsg:l}}}}return e});var fo=(t,e)=>p(n=>async(s,i={})=>{let a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i},c;if(a.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");c=s}else c=(await t.getCodec(a.storeCodec)).encode(s),a.inputCodec=a.storeCodec;let u=new AbortController,f=W(u.signal,a.signal),y=await(await n.post("dag/put",{timeout:a.timeout,signal:f,searchParams:m(a),...await G([c],u,a.headers)})).json();return v.parse(y.Cid["/"])})(e);var Cd=p(t=>async(r,n={})=>{let s=await(await t.post("dag/resolve",{signal:n.signal,searchParams:m({arg:`${r}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:v.parse(s.Cid["/"]),remainderPath:s.RemPath}});function Ad(t,e){return{export:wd(e),get:Sd(t,e),import:Td(e),put:fo(t,e),resolve:Cd(e)}}var Se=t=>{if(t.Type===0)return{name:"SENDING_QUERY",type:t.Type};if(t.Type===1)return{from:q(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:q(e),multiaddrs:r.map(n=>U(n)),protocols:[]})),providers:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:q(e),multiaddrs:r.map(n=>U(n)),protocols:[]}))};if(t.Type===2){let e={id:t.ID??q(t.ID),multiaddrs:[],protocols:[]};return t.Responses&&t.Responses.length&&(e={id:q(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map(r=>U(r)),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:e}}if(t.Type===3)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===4)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:e,Addrs:r})=>({id:q(e),multiaddrs:r.map(n=>U(n)),protocols:[]}))};if(t.Type===5)return{name:"VALUE",type:t.Type,value:me(t.Extra,"base64pad")};if(t.Type===6){let e=t.Responses.map(({ID:r})=>q(r));if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(t.Type===7)return{name:"DIALING_PEER",type:t.Type,peer:q(t.ID)};throw new Error("Unknown DHT event type")};var _d=p(t=>{async function*e(r,n={}){let o=await t.post("dht/findpeer",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers});for await(let s of o.ndjson())yield Se(s)}return e});var Pd=p(t=>{async function*e(r,n={}){let o=await t.post("dht/findprovs",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Se(s)}return e});var Od=p(t=>{async function*e(r,n={}){let o=await t.post("dht/get",{signal:n.signal,searchParams:m({arg:r instanceof Uint8Array?M(r):r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Se(s)}return e});var kd=p(t=>{async function*e(r,n={recursive:!1}){let o=Array.isArray(r)?r:[r],s=await t.post("dht/provide",{signal:n.signal,searchParams:m({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield Se(i)}return e});var Id=p(t=>{async function*e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal),a=await t.post("dht/put",{signal:i,searchParams:m({arg:r instanceof Uint8Array?M(r):r.toString(),...o}),...await G([n],s,o.headers)});for await(let c of a.ndjson())yield Se(c)}return e});var Nd=p(t=>{async function*e(r,n={}){let o=await t.post("dht/query",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Se(s)}return e});function Rd(t){return{findPeer:_d(t),findProvs:Pd(t),get:Od(t),provide:kd(t),put:Id(t),query:Nd(t)}}var Bd=p(t=>{async function e(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()}return e});var Ud=p(t=>{async function e(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()}return e});var Fd=p(t=>{async function e(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()}return e});function Ld(t){return{cmds:Bd(t),net:Ud(t),sys:Fd(t)}}var jd=p(t=>{async function e(r,n,o={}){await(await t.post("files/chmod",{signal:o.signal,searchParams:m({arg:r,mode:n,...o}),headers:o.headers})).text()}return e});var Md=p(t=>{async function e(r,n,o={}){let s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:o.signal,searchParams:m({arg:s.concat(n).map(a=>v.asCID(a)?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}return e});var $d=p(t=>{async function e(r,n={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await t.post("files/flush",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return v.parse(s.Cid)}return e});function Kr(t){let e=k(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}var zd=p(t=>{async function*e(r,n={}){if(!r)throw new Error("ipfs.files.ls requires a path");let o=await t.post("files/ls",{signal:n.signal,searchParams:m({arg:v.asCID(r)?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries||[])yield qd(Kr(i));else yield qd(Kr(s))}return e});function qd(t){return t.hash&&(t.cid=v.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}var Hd=p(t=>{async function e(r,n={}){await(await t.post("files/mkdir",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).text()}return e});var Vd=p(t=>{async function e(r,n,o={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:o.signal,searchParams:m({arg:r.concat(n),...o}),headers:o.headers})).text()}return e});var Wd=_(Gd(),1),Xd=p(t=>{async function*e(r,n={}){let o=await t.post("files/read",{signal:n.signal,searchParams:m({arg:r,count:n.length,...n}),headers:n.headers});yield*(0,Wd.default)(o.body)}return e});var Kd=_(Xn(),1),Qd=p(t=>{async function e(r,n={}){let o=await t.post("files/rm",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new Kd.default.HTTPError(o);throw i.message=s,i}}return e});var lo=p(t=>{async function e(r,n={}){let s=await(await t.post("files/stat",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality||!1,p1(Kr(s))}return e});function p1(t){return t.cid=v.parse(t.hash),delete t.hash,t}var Yd=p(t=>{async function e(r,n={}){await(await t.post("files/touch",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).text()}return e});var Zd=p(t=>{async function e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal);await(await t.post("files/write",{signal:i,searchParams:m({arg:r,streamChannels:!0,count:o.length,...o}),...await G([{content:n,path:"arg",mode:Yn(o.mode),mtime:Zn(o.mtime)}],s,o.headers)})).text()}return e});function ep(t){return{chmod:jd(t),cp:Md(t),flush:$d(t),ls:zd(t),mkdir:Hd(t),mv:Vd(t),read:Xd(t),rm:Qd(t),stat:lo(t),touch:Yd(t),write:Zd(t)}}var tp=_(oe(),1),rp=p(t=>async(r,n,o={})=>{throw(0,tp.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var np=p(t=>{async function e(r,n={type:"Ed25519"}){let s=await(await t.post("key/gen",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return k(s)}return e});var op=p(t=>{async function e(r,n,o,s={}){let a=await(await t.post("key/import",{signal:s.signal,searchParams:m({arg:r,pem:n,password:o,...s}),headers:s.headers})).json();return k(a)}return e});var sp=_(oe(),1),ip=p(t=>async(r,n={})=>{throw(0,sp.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var ap=p(t=>{async function e(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Keys||[]).map(s=>k(s))}return e});var cp=p(t=>{async function e(r,n,o={}){let s=await t.post("key/rename",{signal:o.signal,searchParams:m({arg:[r,n],...o}),headers:o.headers});return k(await s.json())}return e});var up=p(t=>{async function e(r,n={}){let s=await(await t.post("key/rm",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return k(s.Keys[0])}return e});function fp(t){return{export:rp(t),gen:np(t),import:op(t),info:ip(t),list:ap(t),rename:cp(t),rm:up(t)}}var lp=p(t=>{async function e(r,n,o={}){let s=await t.post("log/level",{signal:o.signal,searchParams:m({arg:[r,n],...o}),headers:o.headers});return k(await s.json())}return e});var dp=p(t=>{async function e(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Strings}return e});var pp=p(t=>{async function*e(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:m(r),headers:r.headers})).ndjson()}return e});function hp(t){return{level:lp(t),ls:dp(t),tail:pp(t)}}var mp=p(t=>{async function e(r,n={}){let o=await t.post("name/publish",{signal:n.signal,searchParams:m({arg:`${r}`,...n}),headers:n.headers});return k(await o.json())}return e});var yp=p(t=>{async function*e(r,n={}){let o=await t.post("name/resolve",{signal:n.signal,searchParams:m({arg:r,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}return e});var gp=p(t=>{async function e(r,n={}){let o=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers});return k(await o.json())}return e});var wp=p(t=>{async function e(r={}){let n=await t.post("name/pubsub/state",{signal:r.signal,searchParams:m(r),headers:r.headers});return k(await n.json())}return e});var bp=p(t=>{async function e(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Strings||[]}return e});function vp(t){return{cancel:gp(t),state:wp(t),subs:bp(t)}}function Dp(t){return{publish:mp(t),resolve:yp(t),pubsub:vp(t)}}var Ep=p(t=>{async function e(r,n={}){let s=await(await t.post("object/data",{signal:n.signal,searchParams:m({arg:`${r instanceof Uint8Array?v.decode(r):r}`,...n}),headers:n.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return e});var xp=p(t=>{async function e(r,n={}){let s=await(await t.post("object/get",{signal:n.signal,searchParams:m({arg:`${r instanceof Uint8Array?v.decode(r):r}`,dataEncoding:"base64",...n}),headers:n.headers})).json();return{Data:me(s.Data,"base64pad"),Links:(s.Links||[]).map(i=>({Name:i.Name,Hash:v.parse(i.Hash),Tsize:i.Size}))}}return e});var Sp=p(t=>{async function e(r,n={}){return((await(await t.post("object/links",{signal:n.signal,searchParams:m({arg:`${r instanceof Uint8Array?v.decode(r):r}`,...n}),headers:n.headers})).json()).Links||[]).map(i=>({Name:i.Name,Tsize:i.Size,Hash:v.parse(i.Hash)}))}return e});var Tp=p(t=>{async function e(r={}){let n=await t.post("object/new",{signal:r.signal,searchParams:m({arg:r.template,...r}),headers:r.headers}),{Hash:o}=await n.json();return v.parse(o)}return e});var Cp=(t,e)=>p(n=>{let o=fo(t,e);async function s(i,a={}){return o(i,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return s})(e);var Ap=p(t=>{async function e(r,n={}){let s=await(await t.post("object/stat",{signal:n.signal,searchParams:m({arg:`${r}`,...n}),headers:n.headers})).json();return{...s,Hash:v.parse(s.Hash)}}return e});var _p=p(t=>{async function e(r,n,o={}){let s=await t.post("object/patch/add-link",{signal:o.signal,searchParams:m({arg:[`${r}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return v.parse(i)}return e});var Pp=p(t=>{async function e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal),a=await t.post("object/patch/append-data",{signal:i,searchParams:m({arg:`${r}`,...o}),...await G([n],s,o.headers)}),{Hash:c}=await a.json();return v.parse(c)}return e});var Op=p(t=>{async function e(r,n,o={}){let s=await t.post("object/patch/rm-link",{signal:o.signal,searchParams:m({arg:[`${r}`,n.Name||n.name||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return v.parse(i)}return e});var kp=p(t=>{async function e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal),a=await t.post("object/patch/set-data",{signal:i,searchParams:m({arg:[`${r}`],...o}),...await G([n],s,o.headers)}),{Hash:c}=await a.json();return v.parse(c)}return e});function Ip(t){return{addLink:_p(t),appendData:Pp(t),rmLink:Op(t),setData:kp(t)}}function Np(t,e){return{data:Ep(e),get:xp(e),links:Sp(e),new:Tp(e),put:Cp(t,e),stat:Ap(e),patch:Ip(e)}}var ir=_(oe(),1);async function*po(t){if(t==null)throw(0,ir.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");let e=v.asCID(t);if(e){yield Le({cid:e});return}if(t instanceof String||typeof t=="string"){yield Le({path:t});return}if(t.cid!=null||t.path!=null)return yield Le(t);if(Symbol.iterator in t){let r=t[Symbol.iterator](),n=r.next();if(n.done)return r;if(v.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield Le({cid:n.value});for(let o of r)yield Le({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield Le(n.value);for(let o of r)yield Le(o);return}throw(0,ir.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){let r=t[Symbol.asyncIterator](),n=await r.next();if(n.done)return r;if(v.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield Le({cid:n.value});for await(let o of r)yield Le({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield Le(n.value);for await(let o of r)yield Le(o);return}throw(0,ir.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw(0,ir.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}function Le(t){let e=t.cid||`${t.path}`;if(!e)throw(0,ir.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}var ho=p(t=>{async function*e(r,n={}){for await(let{path:o,recursive:s,metadata:i}of po(r)){let a=await t.post("pin/add",{signal:n.signal,searchParams:m({...n,arg:o,recursive:s,metadata:i?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(let c of a.ndjson()){if(c.Pins){for(let u of c.Pins)yield v.parse(u);continue}yield v.parse(c)}}}return e});var Rp=_(Xr(),1);function Bp(t){let e=ho(t);return p(()=>{async function r(n,o={}){return(0,Rp.default)(e([{path:n,...o}],o))}return r})(t)}function Up(t,e,r){let n={type:t,cid:v.parse(e)};return r&&(n.metadata=r),n}var Fp=p(t=>{async function*e(r={}){let n=[];r.paths&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);let o=await t.post("pin/ls",{signal:r.signal,searchParams:m({...r,arg:n.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(let s of o.ndjson()){if(s.Keys){for(let i of Object.keys(s.Keys))yield Up(s.Keys[i].Type,i,s.Keys[i].Metadata);return}yield Up(s.Type,s.Cid,s.Metadata)}}return e});var mo=p(t=>{async function*e(r,n={}){for await(let{path:o,recursive:s}of po(r)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:m({...n,arg:`${o}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(u=>v.parse(u));continue}yield v.parse(c)}}}return e});var Lp=_(Xr(),1);var jp=t=>{let e=mo(t);return p(()=>{async function r(n,o={}){return(0,Lp.default)(e([{path:n,...o}],o))}return r})(t)};var yo=({Name:t,Status:e,Cid:r})=>({cid:v.parse(r),name:t,status:e}),Mp=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},$p=t=>{if(v.asCID(t))return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},ar=({service:t,cid:e,name:r,status:n,all:o})=>{let s=m({service:Mp(t),name:r,force:o?!0:void 0});if(e)for(let i of e)s.append("cid",$p(i));if(n)for(let i of n)s.append("status",i);return s},qp=({cid:t,service:e,background:r,name:n,origins:o})=>{let s=m({arg:$p(t),service:Mp(e),name:n,background:r?!0:void 0});if(o)for(let i of o)s.append("origin",i.toString());return s};function zp(t){async function e(r,{timeout:n,signal:o,headers:s,...i}){let a=await t.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:qp({cid:r,...i})});return yo(await a.json())}return e}function Hp(t){async function*e({timeout:r,signal:n,headers:o,...s}){let i=await t.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:ar(s)});for await(let a of i.ndjson())yield yo(a)}return e}function Vp(t){async function e({timeout:r,signal:n,headers:o,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:ar({...s,all:!1})})}return e}function Jp(t){async function e({timeout:r,signal:n,headers:o,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:ar({...s,all:!0})})}return e}function Gp(t){let e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function Wp(t){return{service:t.Service,endpoint:new URL(t.ApiEndpoint),...t.Stat&&{stat:h1(t.Stat)}}}function h1(t){switch(t.Status){case"valid":{let{Pinning:e,Pinned:r,Queued:n,Failed:o}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function Xp(t){async function e(r,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:c}=n;await t.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:m({arg:[r,Gp(o),s]}),headers:i})}return e}function Kp(t){async function e(r={}){let{stat:n,headers:o,timeout:s,signal:i}=r,a=await t.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?m({stat:n}):void 0}),{RemoteServices:c}=await a.json();return c.map(Wp)}return e}function Qp(t){async function e(r,n={}){await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:m({arg:r})})}return e}function Yp(t){let e=new yt(t);return{add:Xp(e),ls:Kp(e),rm:Qp(e)}}function Zp(t){let e=new yt(t);return{add:zp(e),ls:Hp(e),rm:Vp(e),rmAll:Jp(e),service:Yp(t)}}function eh(t){return{addAll:ho(t),add:Bp(t),ls:Fp(t),rmAll:mo(t),rm:jp(t),remote:Zp(t)}}var th=t=>Array.isArray(t)?t.map(go):t,go=t=>M(cr(t)),cr=t=>ht.decode(t),rh=t=>BigInt(`0x${M(ht.decode(t),"base16")}`),ur=t=>ht.encode(me(t));var nh=p(t=>{async function e(r={}){let{Strings:n}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:m(r),headers:r.headers})).json();return th(n)||[]}return e});var oh=p(t=>{async function e(r,n={}){let o=await t.post("pubsub/peers",{signal:n.signal,searchParams:m({arg:ur(r),...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return e});var sh=p(t=>{async function e(r,n,o={}){let s=m({arg:ur(r),...o}),i=new AbortController,a=W(i.signal,o.signal);await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await G([n],i,o.headers)})).text()}return e});var m1=Hn("ipfs-http-client:pubsub:subscribe"),ih=(t,e)=>p(r=>{async function n(o,s,i={}){i.signal=e.subscribe(o,s,i.signal);let a,c,u=new Promise((l,y)=>{a=l,c=y}),f=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:i.signal,searchParams:m({arg:ur(o),...i}),headers:i.headers}).catch(l=>{e.unsubscribe(o,s),c(l)}).then(l=>{clearTimeout(f),l&&(y1(l,{onMessage:y=>{if(!!s){if(typeof s=="function"){s(y);return}typeof s.handleEvent=="function"&&s.handleEvent(y)}},onEnd:()=>e.unsubscribe(o,s),onError:i.onError}),a())}),u}return n})(t);async function y1(t,{onMessage:e,onEnd:r,onError:n}){n=n||m1;try{for await(let o of t.ndjson())try{if(!o.from)continue;o.from!=null&&o.seqno!=null?e({type:"signed",from:q(o.from),data:cr(o.data),sequenceNumber:rh(o.seqno),topic:go(o.topicIDs[0]),key:cr(o.key??"u"),signature:cr(o.signature??"u")}):e({type:"unsigned",data:cr(o.data),topic:go(o.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){g1(o)||n(o,!0)}finally{r()}}var g1=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};var ah=(t,e)=>{async function r(n,o){e.unsubscribe(n,o)}return r};var wo=class{constructor(){this._subs=new Map}subscribe(e,r,n){let o=this._subs.get(e)||[];if(o.find(i=>i.handler===r))throw new Error(`Already subscribed to ${e} with this handler`);let s=new AbortController;return this._subs.set(e,[{handler:r,controller:s}].concat(o)),n&&n.addEventListener("abort",()=>this.unsubscribe(e,r)),s.signal}unsubscribe(e,r){let n=this._subs.get(e)||[],o;r?(this._subs.set(e,n.filter(s=>s.handler!==r)),o=n.filter(s=>s.handler===r)):(this._subs.set(e,[]),o=n),(this._subs.get(e)||[]).length||this._subs.delete(e),o.forEach(s=>s.controller.abort())}};function ch(t){let e=new wo;return{ls:nh(t),peers:oh(t),publish:sh(t),subscribe:ih(t,e),unsubscribe:ah(t,e)}}var uh=p(t=>{async function*e(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:k,searchParams:m(r),headers:r.headers})).ndjson()}return e});var fh=p((t,e)=>Object.assign(async function*(n,o={}){let s=Array.isArray(n)?n:[n];yield*(await t.post("refs",{signal:o.signal,searchParams:m({arg:s.map(a=>`${a instanceof Uint8Array?v.decode(a):a}`),...o}),headers:o.headers,transform:k})).ndjson()},{local:uh(e)}));var lh=p(t=>{async function*e(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:m(r),headers:r.headers,transform:o=>({err:o.Error?new Error(o.Error):null,cid:(o.Key||{})["/"]?v.parse(o.Key["/"]):null})})).ndjson()}return e});var bo=p(t=>{async function e(r={}){let o=await(await t.post("repo/stat",{signal:r.signal,searchParams:m(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}return e});var dh=p(t=>{async function e(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Version}return e});function ph(t){return{gc:lh(t),stat:bo(t),version:dh(t)}}var hh=p(t=>{async function*e(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:m(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}return e});function mh(t){return{bitswap:eo(t),repo:bo(t),bw:hh(t)}}var yh=p(t=>{async function e(r={}){let n=await t.post("swarm/addrs",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:q(s),addrs:(o[s]||[]).map(i=>U(i))}))}return e});var gh=p(t=>{async function e(r,n={}){let o=await t.post("swarm/connect",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return e});var wh=p(t=>{async function e(r,n={}){let o=await t.post("swarm/disconnect",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return e});var bh=p(t=>{async function e(r={}){let n=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Strings:o}=await n.json();return(o||[]).map(s=>U(s))}return e});var vh=p(t=>{async function e(r={}){let n=await t.post("swarm/peers",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Peers:o}=await n.json();return(o||[]).map(s=>({addr:U(s.Addr),peer:q(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return e});function Dh(t){return{addrs:yh(t),connect:gh(t),disconnect:wh(t),localAddrs:bh(t),peers:vh(t)}}var vo=p(t=>{async function*e(r,n={}){let o=new AbortController,s=W(o.signal,n.signal),{headers:i,body:a,total:c,parts:u}=await G(r,o,n.headers),[f,l]=typeof n.progress=="function"?w1(c,u,n.progress):[void 0,void 0],y=await t.post("add",{searchParams:m({"stream-channels":!0,...n,progress:Boolean(f)}),onUploadProgress:l,signal:s,headers:i,body:a});for await(let w of y.ndjson())w=k(w),w.hash!==void 0?yield v1(w):f&&f(w.bytes||0,w.name)}return e}),w1=(t,e,r)=>e?[void 0,b1(t,e,r)]:[r,void 0],b1=(t,e,r)=>{let n=0,o=e.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*t);for(;n<o;){let{start:c,end:u,name:f}=e[n];if(a<u){r(a-c,f);break}else r(u-c,f),n+=1}}};function v1({name:t,hash:e,size:r,mode:n,mtime:o,mtimeNsecs:s}){let i={path:t,cid:v.parse(e),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s||0}),i}var Bh=_(Xr(),1);var Th=_(oe(),1);var Ch=_(tr(),1),Ah=_(Sh(),1),_h=_(zr(),1),Ph=_(di(),1),Oh=_(pi(),1);async function*Do(t){yield t}async function fr(t){if(Ee(t))return Do(Bi(t));if(typeof t=="string"||t instanceof String)return Do(Bi(t.toString()));if(ot(t))return(0,Ah.default)(t);if(st(t)&&(t=(0,Ch.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=(0,_h.default)(t),{value:r,done:n}=await e.peek();if(n)return Do(new Uint8Array(0));if(e.push(r),Number.isInteger(r))return Do(Uint8Array.from(await(0,Ph.default)(e)));if(Ee(r)||typeof r=="string"||r instanceof String)return(0,Oh.default)(e,Bi)}throw(0,Th.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function Bi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):me(t.toString())}var xo=_(oe(),1),kh=_(tr(),1),Ih=_(zr(),1);async function*Nh(t,e){if(t==null)throw(0,xo.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield Eo(t.toString(),e);return}if(Ee(t)||ot(t)){yield Eo(t,e);return}if(st(t)&&(t=(0,kh.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=(0,Ih.default)(t),{value:n,done:o}=await r.peek();if(o){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Ee(n)||typeof n=="string"||n instanceof String){yield Eo(r,e);return}throw(0,xo.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Hr(t)){yield Eo(t,e);return}throw(0,xo.default)(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Eo(t,e){let{path:r,mode:n,mtime:o,content:s}=t,i={path:r||"",mode:or(n),mtime:sr(o)};return s?i.content=await e(s):r||(i.content=await e(t)),i}function Rh(t){return Nh(t,fr)}function Uh(t){let e=vo(t);return p(()=>{async function r(n,o={}){return await(0,Bh.default)(e(Rh(n),o))}return r})(t)}var Fh=p(t=>{async function*e(r,n={}){yield*(await t.post("cat",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers})).iterator()}return e});var Lh=p(t=>async(r={})=>(await t.post("commands",{signal:r.signal,searchParams:m(r),headers:r.headers})).json());var jh=p(t=>async(r,n={})=>(await(await t.post("dns",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json()).Path);var Mh=p(t=>()=>{let e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}});var $h=p(t=>{async function*e(r,n={}){let o={arg:`${r instanceof Uint8Array?v.decode(r):r}`,...n};o.compressionLevel&&(o["compression-level"]=o.compressionLevel,delete o.compressionLevel),yield*(await t.post("get",{signal:n.signal,searchParams:m(o),headers:n.headers})).iterator()}return e});var So=p(t=>{async function e(r={}){let o=await(await t.post("id",{signal:r.signal,searchParams:m({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...k(o)};return s.id=q(s.id),s.addresses&&(s.addresses=s.addresses.map(i=>U(i))),s}return e});var qh=t=>{let e=So(t);async function r(n={}){let o=await e(n);return Boolean(o&&o.addresses&&o.addresses.length)}return r};var zh=p((t,e)=>{async function*r(n,o={}){let s=`${n instanceof Uint8Array?v.decode(n):n}`;async function i(c){let u=c.Hash;if(u.includes("/")){let l=u.startsWith("/ipfs/")?u:`/ipfs/${u}`;u=(await lo(e)(l)).cid}else u=v.parse(u);let f={name:c.Name,path:s+(c.Name?`/${c.Name}`:""),size:c.Size,cid:u,type:E1(c)};return c.Mode&&(f.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(f.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(f.mtime.nsecs=c.MtimeNsecs)),f}let a=await t.post("ls",{signal:o.signal,searchParams:m({arg:s,...o}),headers:o.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let u=c.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(!u.length){yield i(c);return}yield*u.map(i)}}return r});function E1(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}var Hh=p(t=>{async function e(r={}){let n=await t.post("dns",{signal:r.signal,searchParams:m(r),headers:r.headers});return k(await n.json())}return e});var Vh=p(t=>{async function*e(r,n={}){yield*(await t.post("ping",{signal:n.signal,searchParams:m({arg:`${r}`,...n}),headers:n.headers,transform:k})).ndjson()}return e});var Jh=p(t=>{async function e(r,n={}){let o=await t.post("resolve",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Path:s}=await o.json();return s}return e});var Gh=_(oe(),1),Wh=p(t=>async(r={})=>{throw(0,Gh.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Xh=p(t=>{async function e(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:m(r),headers:r.headers})).text()}return e});var Kh=p(t=>{async function e(r={}){let n=await t.post("version",{signal:r.signal,searchParams:m(r),headers:r.headers});return{...k(await n.json()),"ipfs-http-client":"1.0.0"}}return e});var C1=_(Yh(),1);function Zh(t={}){let e={name:Tt.name,code:Tt.code,encode:u=>u,decode:u=>u},r=Object.values(qe);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach(u=>r.push(u));let n=new fn({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),o=Object.values(pu);[rs,_n,Es,xs,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(u=>o.push(u));let s=new ln({codecs:o,loadCodec:t.ipld&&t.ipld.loadCodec}),i=Object.values(du);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach(u=>i.push(u));let a=new dn({hashers:i,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:Uh(t),addAll:vo(t),bitswap:Vf(t),block:nd(t),bootstrap:ud(t),cat:Fh(t),commands:Lh(t),config:gd(t),dag:Ad(s,t),dht:Rd(t),diag:Ld(t),dns:jh(t),files:ep(t),get:$h(t),getEndpointConfig:Mh(t),id:So(t),isOnline:qh(t),key:fp(t),log:hp(t),ls:zh(t),mount:Hh(t),name:Dp(t),object:Np(s,t),pin:eh(t),ping:Vh(t),pubsub:ch(t),refs:fh(t),repo:ph(t),resolve:Jh(t),start:Wh(t),stats:mh(t),stop:Xh(t),swarm:Dh(t),version:Kh(t),bases:n,codecs:s,hashers:a}}var em={nested:{ipfs:{nested:{FileType:{values:{DIRECTORY:0,FILE:1}},MFS:{methods:{ls:{requestType:"LsRequest",responseType:"LsResponse",responseStream:!0},write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse"}}},LsRequest:{fields:{path:{type:"string",id:1}}},LsResponse:{fields:{name:{type:"string",id:1},type:{type:"FileType",id:2},size:{type:"uint32",id:3},cid:{type:"string",id:4},mode:{type:"uint32",id:5},mtime:{type:"int32",id:6},mtimeNsecs:{type:"uint32",id:7}}},WriteRequest:{fields:{path:{type:"string",id:1},content:{type:"bytes",id:2}}},WriteResponse:{fields:{}},PubSub:{methods:{subscribe:{requestType:"SubscribeRequest",responseType:"SubscribeResponse",responseStream:!0},unsubscribe:{requestType:"UnSubscribeRequest",responseType:"UnSubscribeResponse"}}},SubscribeRequest:{fields:{topic:{type:"string",id:1}}},SubscribeResponse:{fields:{handler:{type:"string",id:1},from:{type:"string",id:2},sequenceNumber:{type:"bytes",id:3},data:{type:"bytes",id:4},topic:{type:"string",id:5},key:{type:"bytes",id:6},signature:{type:"bytes",id:7},type:{type:"string",id:8}}},UnSubscribeRequest:{fields:{topic:{type:"string",id:1},handlers:{rule:"repeated",type:"string",id:2}}},UnSubscribeResponse:{fields:{}},Root:{methods:{id:{requestType:"IdRequest",responseType:"IdResponse"},add:{requestType:"AddRequest",requestStream:!0,responseType:"AddResponse",responseStream:!0}}},AddResponseType:{values:{PROGRESS:0,RESULT:1}},IdRequest:{fields:{peerId:{type:"string",id:1}}},IdResponse:{fields:{id:{type:"string",id:1},publicKey:{type:"string",id:2},addresses:{rule:"repeated",type:"string",id:3},agentVersion:{type:"string",id:4},protocolVersion:{type:"string",id:5},protocols:{rule:"repeated",type:"string",id:6}}},AddRequest:{fields:{index:{type:"int32",id:1},type:{type:"FileType",id:2},path:{type:"string",id:3},mode:{type:"uint32",id:4},mtime:{type:"int32",id:5},mtimeNsecs:{type:"uint32",id:6},content:{type:"bytes",id:7}}},AddResponse:{fields:{type:{type:"AddResponseType",id:1},path:{type:"string",id:2},bytes:{type:"int32",id:3},cid:{type:"string",id:4},mode:{type:"uint32",id:5},mtime:{type:"int32",id:6},mtimeNsecs:{type:"uint32",id:7},size:{type:"uint32",id:8}}}}}}};var ha=_(Wm(),1),{Service:aD}=ha.default,Xm={keepCase:!1,longs:String,enums:String,defaults:!1,oneofs:!0};function Km(){let t=ha.default.Root.fromJSON(em),e={};return Object.keys(t.nested.ipfs).filter(r=>t.nested.ipfs[r]instanceof aD).map(r=>t.nested.ipfs[r]).forEach(r=>{let n={};e[r.name]=n,Object.keys(r.methods).forEach(o=>{let s=r.methods[o].resolve();n[o]={service:{serviceName:`ipfs.${r.name}`},methodName:o,requestStream:s.requestStream,responseStream:s.responseStream,requestType:{serializeBinary:i=>{let a=s.resolvedRequestType.fromObject(i);return s.resolvedRequestType.encode(a).finish()},deserializeBinary:i=>{let a=s.resolvedRequestType.decode(i),c=s.resolvedRequestType.toObject(a,Xm);return Object.defineProperty(c,"toObject",{enumerable:!1,configurable:!1,value:()=>c}),c}},responseType:{serializeBinary:i=>{let a=s.resolvedResponseType.fromObject(i);return s.resolvedResponseType.encode(a).finish()},deserializeBinary:i=>{let a=s.resolvedResponseType.decode(i),c=s.resolvedResponseType.toObject(a,Xm);return Object.defineProperty(c,"toObject",{enumerable:!1,configurable:!1,value:()=>c}),c}}}})}),e}var Rt=_(ya(),1);function Qm(t){return co(t,fr)}var Fo=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},yr=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Fo(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new Fo(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function ga(t={}){return cD(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function cD(t,e){e=e??{};let r=e.onEnd,n=new yr,o,s,i,a=async()=>n.isEmpty()?i?{done:!0}:await new Promise((d,b)=>{s=D=>{s=null,n.push(D);try{d(t(n))}catch(A){b(A)}return o}}):t(n),c=d=>s!=null?s(d):(n.push(d),o),u=d=>(n=new yr,s!=null?s({error:d}):(n.push({error:d}),o)),f=d=>{if(i)return o;if(e?.objectMode!==!0&&d?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:d})},l=d=>i?o:(i=!0,d!=null?u(d):c({done:!0})),y=()=>(n=new yr,l(),{done:!0}),w=d=>(l(d),{done:!0});if(o={[Symbol.asyncIterator](){return this},next:a,return:y,throw:w,push:f,end:l,get readableLength(){return n.size}},r==null)return o;let h=o;return o={[Symbol.asyncIterator](){return this},next(){return h.next()},throw(d){return h.throw(d),r!=null&&(r(d),r=void 0),{done:!0}},return(){return h.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(d){return h.end(d),r!=null&&(r(d),r=void 0),o},get readableLength(){return h.readableLength}},o}var _y=_(oe(),1);var vy=_(by(),1),{__extends:I5,__assign:$o,__rest:N5,__decorate:R5,__param:B5,__metadata:U5,__awaiter:F5,__generator:L5,__exportStar:j5,__createBinding:M5,__values:$5,__read:q5,__spread:z5,__spreadArrays:H5,__spreadArray:V5,__await:J5,__asyncGenerator:G5,__asyncDelegator:W5,__asyncValues:X5,__makeTemplateObject:K5,__importStar:Q5,__importDefault:Y5,__classPrivateFieldGet:Z5,__classPrivateFieldSet:eN,__classPrivateFieldIn:tN}=vy.default;function Dy(t){return t.toLowerCase()}var uD=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],fD=/[^A-Z0-9]+/gi;function xy(t,e){e===void 0&&(e={});for(var r=e.splitRegexp,n=r===void 0?uD:r,o=e.stripRegexp,s=o===void 0?fD:o,i=e.transform,a=i===void 0?Dy:i,c=e.delimiter,u=c===void 0?" ":c,f=Ey(Ey(t,n,"$1\0$2"),s,"\0"),l=0,y=f.length;f.charAt(l)==="\0";)l++;for(;f.charAt(y-1)==="\0";)y--;return f.slice(l,y).split("\0").map(a).join(u)}function Ey(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,o){return n.replace(o,r)},t)}function Sy(t,e){return e===void 0&&(e={}),xy(t,$o({delimiter:"."},e))}function Ty(t,e){return e===void 0&&(e={}),Sy(t,$o({delimiter:"-"},e))}function wr(t={}){let e={};return Object.keys(t||{}).forEach(r=>{typeof t[r]!="function"&&(e[Ty(r)]=t[r].toString())}),e}var Cy=_(ya(),1),Ay=()=>Cy.default.grpc.WebsocketTransport;async function lD(t,e,r){for await(let n of r)e.send({serializeBinary:()=>t.requestType.serializeBinary(n)})}function Dt(t,e,r){let n=ga({objectMode:!0}),o=ga({objectMode:!0}),s=t.client(e,{...r,host:At(r.host),transport:Ay()({agent:r.agent})});return s.onMessage(i=>{o.push(i)}),s.onEnd((i,a,c)=>{let u;if(i){let f=new Error(a);u=(0,_y.default)(f,c.get("grpc-code")[0],{status:i});let l=c.get("grpc-stack")[0];l=l&&l.replace(/\\n/g,`
`),u.stack=l||f.stack}o.end(u)}),lD(e,s,n).catch(i=>{o.end(i)}).finally(()=>{s.finishSend()}),s.start(wr(r.metadata)),{sink:n,source:o}}var Uy=_(By(),1),Fy=_(Wn(),1);var ut=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=ut.code}};ut.code="ERR_TIMEOUT";function Pe(t,e){return(...r)=>{let n=r[e??r.length-1];if(!n||!n.timeout)return t(...r);let o=typeof n.timeout=="string"?$n(n.timeout):n.timeout,s=new Uy.TimeoutController(o);n.signal=(0,Fy.anySignal)([n.signal,s.signal]);let i=t(...r),a=new Promise((f,l)=>{s.signal.addEventListener("abort",()=>{l(new ut)})}),c=Date.now(),u=()=>{if(s.signal.aborted)throw new ut;if(Date.now()-c>o)throw s.abort(),new ut};return i[Symbol.asyncIterator]?async function*(){let f=i[Symbol.asyncIterator]();try{for(;;){let{value:l,done:y}=await Promise.race([f.next(),a]);if(y)break;u(),yield l}}catch(l){throw u(),l}finally{s.clear(),f.return&&f.return()}}():(async()=>{try{let f=await Promise.race([i,a]);return u(),f}catch(f){throw u(),f}finally{s.clear()}})()}}function hD(t,e,r,n,o){let s={index:t,type:"DIRECTORY",path:r};o&&(s.mtime=o.secs,s.mtimeNsecs=o.nsecs),n!=null&&(s.mode=n),e.push(s)}async function mD(t,e,r,n,o,s){r instanceof Uint8Array&&(r=[r]);for await(let a of r){let c={index:t,type:"FILE",path:n};s&&(c.mtime=s.secs,c.mtimeNsecs=s.nsecs),o!=null&&(c.mode=o),c.content=new Uint8Array(a,a.byteOffset,a.byteLength),e.push(c)}let i={index:t,type:"FILE",path:n};e.push(i)}async function yD(t,e){let r=1;for await(let{path:n,content:o,mode:s,mtime:i}of Qm(t)){let a=r;if(r++,o)await mD(a,e,o,n,s,i);else if(n)hD(a,e,n,s,i);else throw new Error("Must pass path or content or both")}}function Ly(t,e,r){async function*n(o,s={}){let{source:i,sink:a}=Dt(t,e,{host:r.url,debug:Boolean(process.env.DEBUG),metadata:s,agent:r.agent});yD(o,a).catch(c=>{a.end(c)}).finally(()=>{a.end()});for await(let c of i){if(c.type==="PROGRESS"){s.progress&&s.progress(c.bytes,c.path);continue}yield{path:c.path,cid:v.parse(c.cid),mode:c.mode,mtime:{secs:c.mtime||0,nsecs:c.mtimeNsecs||0},size:c.size}}}return Pe(n)}var jy=_(uo(),1);function zo(t,e,r,n){let{source:o,sink:s}=Dt(t,e,n);return s.push(r),(0,jy.default)(o)}function My(t,e,r){async function n(o={}){let i=await zo(t,e,{},{host:r.url,metadata:wr(o),agent:r.agent});return{...i,addresses:(i.addresses||[]).map(a=>U(a))}}return Pe(n)}function Ho(t,e,r,n){let{source:o,sink:s}=Dt(t,e,n);return s.push(r),o}function $y(t,e,r){async function*n(o,s={}){let i={path:o};for await(let a of Ho(t,e,i,{host:r.url,debug:Boolean(process.env.DEBUG),metadata:s,agent:r.agent}))yield{name:a.name,type:a.type.toLowerCase(),size:a.size,cid:v.parse(a.cid),mode:a.mode,mtime:{secs:a.mtime||0,nsecs:a.mtimeNsecs||0}}}return Pe(n)}var qy=_(uo(),1);async function zy(t,e,r,n){let{source:o,sink:s}=Dt(t,e,n);for await(let i of r)s.push(i);return s.end(),(0,qy.default)(o)}async function*gD(t,e){for await(let r of await fr(e))yield{path:t,content:r}}function Hy(t,e,r){async function n(o,s,i={}){let a={...i},c=sr(i.mtime);c!=null&&(a.mtime=c.secs,a.mtimeNsecs=c.nsecs);let u=or(i.mode);u!=null&&(a.mode=u),await zy(t,e,gD(o,s),{host:r.url,debug:Boolean(process.env.DEBUG),metadata:a,agent:r.agent})}return Pe(n)}var br=new Map;function va(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}function Vy(t,e,r){async function n(o,s,i={}){let a={topic:o},c=va();Promise.resolve().then(async()=>{try{for await(let u of Ho(t,e,a,{host:r.url,debug:Boolean(process.env.DEBUG),metadata:i,agent:r.agent}))if(u.handler){let f=br.get(o)||new Map;f.set(u.handler,s),br.set(o,f),c.resolve()}else{let f;if(u.type==="signed"?f={type:"signed",from:q(u.from),sequenceNumber:BigInt(`0x${M(u.sequenceNumber,"base16")}`),data:u.data,topic:u.topic,key:u.key,signature:u.signature}:f={type:"unsigned",data:u.data,topic:u.topic},typeof s=="function"){s(f);continue}s!=null&&typeof s.handleEvent=="function"&&s.handleEvent(f)}}catch(u){i&&i.onError&&i.onError(u)}}),await c.promise}return Pe(n)}function Jy(t,e,r){async function n(o,s,i={}){let a=[],c=br.get(o);if(!c)return;if(s)for(let[f,l]of c.entries())l===s&&a.push(f);await zo(t,e,{topic:o,handlers:a},{host:r.url,metadata:wr(i),agent:r.agent});for(let f of a)c.delete(f);c.size||br.delete(o)}return Pe(n)}var vr=Km(),Gy={"ws://":"http://","wss://":"https://"};function wD(t){Object.keys(Gy).forEach(e=>{t.url.startsWith(e)&&(t.url=Gy[e]+t.url.substring(e.length))})}function Wy(t={url:""}){let e={...t,url:At(t.url)};return wD(e),{addAll:Ly(Rt.default.grpc,vr.Root.add,e),id:My(Rt.default.grpc,vr.Root.id,e),files:{ls:$y(Rt.default.grpc,vr.MFS.ls,e),write:Hy(Rt.default.grpc,vr.MFS.write,e)},pubsub:{subscribe:Vy(Rt.default.grpc,vr.PubSub.subscribe,e),unsubscribe:Jy(Rt.default.grpc,vr.PubSub.unsubscribe,e)}}}var bD=Kn.bind({ignoreUndefined:!0});function vD(t={}){let e=[];return t.http&&e.push(Zh({...t,url:t.http})),t.grpc&&e.push(Wy({...t,url:t.grpc})),bD({},...e)}return eg(DD);})();
return IpfsClient}));
